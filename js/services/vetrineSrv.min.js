(function(){function b(b,c,f){var g=f+"vetrine.php",h=function(a){return{id:parseInt(a.cmp_id),nome:a.cmp_nome,titolo:a.cmp_title,note:a.cmp_note,marchio:parseInt(a.cmp_mark_id),linea:parseInt(a.cmp_line_id),posizione:parseInt(a.cmp_pos),prodotti:[]}},k=function(a){return{id:parseInt(a.prd_id),codice:a.prd_cod,titolo:a.prd_title,note:a.prd_note,dimensioni:a.prd_dim,codiceFinitura:a.abb_cod,tipologia:a.tab_nome,prezzo:JSON.parse(a.prd_price_array),abbinamentiFiniture:JSON.parse(a.abb_array),abbinamento:parseInt(a.prd_abb),
finitura:parseInt(a.prd_fin),quantita:parseInt(a.cmpr_qnt)}};return{getAllByLinea:function(a,d,e){b.get(g,{params:{action:"getAllByLinea",id:a},cache:!0}).then(function(a){c.debugConsole&&console.log("GET ALL BY LINEA vetrine: SUCCESS",a);if(d){var b=[];_.each(a.data,function(a){var c=h(a);_.each(a.prodotti,function(a){c.prodotti.push(k(a))});b.push(c)});return d(b)}},function(a){c.debugConsole&&console.log("GET ALL BY LINEAvetrine: FAIL",a);if(e)return e()})}}}angular.module("mpu").service("vetrineSrv",
b);b.$inject=["$http","$rootScope","API"]})();
