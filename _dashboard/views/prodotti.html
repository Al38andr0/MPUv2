<div class="row">
    <div class="col-12 mt-3">
        <h1>Prodotti</h1>
    </div>
    <div class="col-12 mb-5">
        <prodotti entity="entity.prodotto"></prodotti>
    </div>
    <div class="col-7">
        <ul uib-pagination class="pagination-md justify-content-end mb-0"
            data-boundary-links="true"
            data-total-items="($root.prodotti | filter : {prd_cod : $root.settings.query.codice} | filterById : $root.settings.query.linee : 'prd_line_id').length"
            data-items-per-page="$root.settings.itemsPerPage"
            data-max-size="3"
            data-ng-model="entity.currentPage"
            data-previous-text="&lsaquo;"
            data-next-text="&rsaquo;"
            data-first-text="&laquo;"
            data-last-text="&raquo;"
            data-force-ellipses="true"
        ></ul>
    </div>
    <div class="col-1">
        <input type="number" class="form-control" ng-model="$root.settings.itemsPerPage" title="" uib-tooltip="Elementi per pagina" >
    </div>
    <div class="col-2">
        <input type="text" class="form-control" ng-model="$root.settings.query.codice" title="" placeholder="Filtro codice">
    </div>
    <div class="col-2">
        <select class="form-control" data-ng-model="$root.settings.query.linee" ng-options="o.line_id as o.line_nome for o in $root.linee" title="">
            <option value="">Tutte le linee</option>
        </select>
    </div>
</div>
<div class="col-12 p-0  mt-3 list">
    <div ng-repeat="e in $root['prodotti'] | filter : {prd_cod : $root.settings.query.codice} | filterById : $root.settings.query.linee : 'prd_line_id'"
         ng-if="$root.settings.show($index, entity.currentPage)"
         ng-click="selectItem(e)">
        <h4 uib-tooltip="ID: {{e['prd_id']}}" data-tooltip-placement="left">{{e['prd_cod']}}<span ng-bind-html="e['prd_title']"></span></h4>
        <p>{{$root.settings.convert(e['prd_mark_id'], 'marchi', 'mark_id' ,'mark_nome')}}</p>
        <p>{{$root.settings.convert(e['prd_line_id'], 'linee', 'line_id' ,'line_nome')}}</p>
        <p>{{$root.settings.convert(e['prd_lnfn_id'], 'linee', 'line_id' ,'line_nome')}}</p>
        <p>{{$root.settings.convert(e['prd_tbpr'], 'tabelle_prodotti', 'tbpr_id' ,'tbpr_nome')}}</p>
        <p>Dimensioni: {{e['prd_dim'] | decoded}}</p>
        <p>Posizione: {{e['prd_pos']}}</p>
        <div ng-repeat="p in e['prd_price_array']">
            <p>{{p.z | currency}} - {{$root.settings.convert(p.a, 'tabelle_finiture', 'tab_id' ,'tab_nome')}}</p></div>
    </div>
</div>