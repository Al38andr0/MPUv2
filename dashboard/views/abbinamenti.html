<button type="button" class="btn btn-info saveData" ng-click="saveDataDB()" ng-disabled="saving">SAVE DATA FROM DB</button>
<div class="nuovo" ng-if="!abbinamento.selected">
    <h1>nuova abbinamento</h1>
    <div class="rows">
        <select class="form-control marchio" ng-options="c.i as c.n for c in vm.marchi | orderBy : 'n'" data-ng-model="vm.nuovoAbbinamento.m">
            <option value="" selected>Marchio</option>
        </select>
        <select ng-disabled="!vm.nuovoAbbinamento.m" class="form-control marchio" ng-options="l.i as l.n for l in vm.linee | filter : {m : vm.nuovoAbbinamento.m} | orderBy : 'n'" data-ng-model="vm.nuovoAbbinamento.l">
            <option value="" selected>Linea</option>
        </select>
    </div>
    <div class="rows">
        <select ng-disabled="!vm.nuovoAbbinamento.l" class="form-control tabelle" ng-options="t.i as t.n for t in vm.finitureTabelle | filter : {l : vm.nuovoAbbinamento.l} | orderBy : 'n'" data-ng-model="vm.nuovoAbbinamento.u">
            <option value="" selected>Tabelle finiture</option>
        </select>
        <input class="form-control nome" type="text" placeholder="Codice" ng-model="vm.nuovoAbbinamento.c" popover="Codice abbinamento" popover-trigger="mouseenter">
    </div>
    <div class="rows">
        <div class="abbinamentiLista" ng-repeat="n in vm.nuovoAbbinamento.f track by $index">
            <select ng-disabled="!vm.nuovoAbbinamento.u" class="form-control finitura" ng-options="f.i as (f.c + ' - ' + f.n) for f in vm.finiture | filter : {m : vm.nuovoAbbinamento.m} | orderBy : 'c'" data-ng-model="vm.nuovoAbbinamento.f[$index].i">
                <option value="" selected>Finiture</option>
            </select>
            <input class="form-control abbinamento" type="text" placeholder="Abbinamento" ng-model="vm.nuovoAbbinamento.f[$index].n" popover="Abbinamento" popover-trigger="mouseenter">
            <i class="icons-minus" ng-click="removeAbbinamento($index)" ng-show="vm.nuovoAbbinamento.f.length > 1" ng-class="{addMargin : !$last}"></i>
            <i class="icons-plus" ng-click="addAbbinamento()" ng-show="$last" ng-class="{addMargin : $first}"></i>
        </div>
    </div>
    <div class="rows">
        <button class="btn btn-primary" type="button" ng-click="action('N')" ng-disabled="updateCheck()">SUBMIT</button>
        <button class="btn btn-primary" type="button" ng-click="newAbbinamento()">RESET</button>
    </div>
    <div class="rows">
        <button class="btn btn-danger errore" ng-if="errore.abbinamento">ERRORE - ABBINAMENTO ESISTENTE O VALORI ABBINAMENTI VUOTI</button>
    </div>
</div>
<div class="modifica" ng-if="abbinamento.selected">
    <h1>modifica abbinamento</h1>
    <abbinamenti abbinamento-original = "abbinamento" vm = "vm"></abbinamenti>
</div>

<div class="gestione">
    <h1>gestione abbinamenti</h1>
    <div class="filtri">
        <div class="rows">
            <input class="form-control nome" type="text" placeholder="Filtro codice" ng-model="input" ng-keyup="eraseInput($event)" title="Filtro codice">
            <div class="inlineBlock" ng-include="'include/marchiFilter.html'"></div>
            <div class="inlineBlock" ng-include="'include/lineeFilter.html'"></div>
        </div>
        <div class="rows">
            <div class="inlineBlock" ng-include="'include/tabFilter.html'"></div>
            <input class="form-control pos" type="number" ng-model="vm.itemsPerPage" popover="Numero di risultati per pagina" popover-trigger="mouseenter">
            <i class="icons-sort blu" popover="Ordina per nome" popover-trigger="mouseenter" ng-click="sorting('c')"></i>
            <i class="icons-sort green" popover="Ordina per tabella" popover-trigger="mouseenter" ng-click="sorting('u')"></i>
        </div>
    </div>
    <div class="list">
        <div ng-repeat="s in vm.abbinamenti
        | orderBy       :   vm.sorting
        | filterByMark  :   filtro.marchio.i
        | filterByLine  :   filtro.linea.i
        | filterByTab   :   filtro.finituraTabella.i
        | filter        :   {c : filtro.abbinamento.c}
        | offset        :   ((vm.currentPage -1) * vm.itemsPerPage) : ((vm.currentPage -1) * vm.itemsPerPage + vm.itemsPerPage)
        ">
            <h4 ng-click="selectAbbinamento(s)">{{s.c}} <span>{{convert(s.u, 'finitureTabelle', 'n')}}</span></h4>
            <p>{{convert(s.m, 'marchi', 'n')}}</p>
            <p>{{convert(s.l, 'linee', 'n')}}</p>
            <p ng-repeat="f in s.f">{{convert(f.i, 'finiture', 'n')}} - {{f.n}}</p>
        </div>
        <div ng-if="(vm.abbinamenti | filter : {c : filtro.abbinamento.c}).length != 0" class="paginationContainer">
            <pagination
                    total-items = "(vm.abbinamenti
                    | filterByMark  :   filtro.marchio.i
                    | filterByLine  :   filtro.linea.i
                    | filterByTab   :   filtro.finituraTabella.i
                    | filter : {c : filtro.abbinamento.c}).length"
                    ng-model = "vm.currentPage"
                    boundary-links = "true"
                    max-size = "vm.maxSize"
                    items-per-page = "vm.itemsPerPage"
                    rotate = "false">
            </pagination>
        </div>
        <h5 ng-if="(vm.abbinamenti | filter : {c : filtro.abbinamento.c}).length == 0">Nessun risultato disponibile</h5>
    </div>
</div>