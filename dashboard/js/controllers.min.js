var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(c,b,a){c instanceof String&&(c=String(c));for(var d=c.length,e=0;e<d;e++){var f=c[e];if(b.call(a,f,e,c))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,b,a){c!=Array.prototype&&c!=Object.prototype&&(c[b]=a.value)};
$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(c,b,a,d){if(b){a=$jscomp.global;c=c.split(".");for(d=0;d<c.length-1;d++){var e=c[d];e in a||(a[e]={});a=a[e]}c=c[c.length-1];d=a[c];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(a,c,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(b,a){return $jscomp.findInternal(this,b,a).v}},"es6","es3");angular.module("mpuDashboard").controller("mainCtrl",mainCtrl);mainCtrl.$inject="$scope $rootScope $location _ $cookies dataSvc $timeout dashboardPages $http".split(" ");
function mainCtrl(c,b,a,d,e,f,h,g,k){b.options={show:[{id:1,label:"Online"},{id:0,label:"Offline"}],multiple:[{id:1,label:"Singola"},{id:0,label:"Multiple"}],finitura:[{id:1,label:"Rivestimento"},{id:0,label:"Finitura"}],homepage:[{id:1,label:"Visibile"},{id:0,label:"Non visibile"}],vetrina:[{id:1,label:"Attivata"},{id:0,label:"Disattivata"}],prezzo:[{id:1,label:"Bassa"},{id:2,label:"Media/Bassa"},{id:3,label:"Media"},{id:4,label:"Media/Alta"},{id:5,label:"Alta"}],servizi:[{id:1,label:"Importo fisso"},
{id:2,label:"Percentuale"},{id:3,label:"Da quantificare"}]};b.Actions=function(a,c){this.success=function(c){console.log("SUCCESS: ",c);a.$emit("updateTable");"Updated"!==c.data&&a.actions.reset();b.saving=!1;a.confirm=!1};this.fail=function(a){console.log("FAIL: ",a);b.saving=!1};this.confirm=function(){a.confirm=!0;h(function(){return a.confirm=!1},4E3)};this.checked=function(){a.checked=!0;h(function(){return a.checked=!1},4E3)};this.create=function(){b.saving=!0;var d=a.buildBody();k.post("php/"+
c+".php?type=new",JSON.stringify(d)).then(this.success,this.fail)};this.update=function(){b.saving=!0;var d=a.buildBody();d.id=a.entity.id;k.post("php/"+c+".php?type=update",JSON.stringify(d)).then(this.success,this.fail)};this.erase=function(){b.saving=!0;var d=a.buildBody();d.id=a.entity.id;k.post("php/"+c+".php?type=delete",JSON.stringify(d)).then(this.success,this.fail)};this.cleanInputFile=function(){angular.forEach(angular.element("input[type='file']"),function(a){angular.element(a).val(null)})}};
b.settings={itemsPerPage:5,query:{},tooltip:"top",load:function(a,c){if(!c&&b[a])return b[a];k.get("php/"+a+".php?type=get").then(function(c){console.log("GET SUCCESS "+a+": ",c.data);b[a]=c.data;b.$broadcast(a)},function(a){console.log("GET FAILS: ",a)})},show:function(a,c){return a>=(c-1)*b.settings.itemsPerPage&&a<c*b.settings.itemsPerPage},convert:function(a,c,e,f){if(b[c])return d.find(b[c],function(b){return parseInt(b[e])===parseInt(a)})[f]},parse:function(a){return JSON.parse(a)},checklist:{categorie:function(a,
c,e){var f=[];d.each(b[a],function(a){var b=parseInt(a[c+"_id"]);f.push({id:b,nome:a[c+"_nome"],checked:e?-1!==e.indexOf(b):!1})});return f},settori:function(a,c,e){var f=[];d.each(b[a],function(a){var b=parseInt(a[c+"_id"]);f.push({id:b,nome:a[c+"_nome"],categoria:a[c+"_cat_id"],checked:e?-1!==e.indexOf(b):!1})});return f}},replaceAll:function(a,b,c){return a.replace(new RegExp(b,"g"),c)},idToLabel:function(a,b){return d.find(b,function(b){return b.id===a}).label}};b.Model=function(){this.list=[];
this.currentPage=1};c.vm={};b.saving=!1;b.changing=!1;var l=function(a){c.vm.currentSubLink=a.slice(1);c.vm.currentPage=1;c.vm.itemsPerPage=10};c.vm.changeLink=function(b){a.path(b.link);l(a.path())};c.$on("$locationChangeSuccess",function(){l(a.path())});c.vm.links=g}
angular.module("mpuDashboard").controller("categorieCtrl",categorieCtrl).controller("settoriCtrl",settoriCtrl).controller("marchiCtrl",marchiCtrl).controller("tabelleProdottiCtrl",tabelleProdottiCtrl).controller("finitureCtrl",finitureCtrl).controller("lineeCtrl",lineeCtrl).controller("settoriLineeCtrl",settoriLineeCtrl).controller("tabelleFinitureCtrl",tabelleFinitureCtrl).controller("abbinamentiCtrl",abbinamentiCtrl).controller("prodottiCtrl",prodottiCtrl).controller("vetrineCtrl",vetrineCtrl).controller("vetrineProdottiCtrl",
vetrineProdottiCtrl).controller("provinceCtrl",provinceCtrl).controller("convenzioniCtrl",convenzioniCtrl).controller("rivenditoriCtrl",rivenditoriCtrl);categorieCtrl.$inject=["$scope","$rootScope"];settoriCtrl.$inject=["$scope","$rootScope"];marchiCtrl.$inject=["$scope","$rootScope"];tabelleProdottiCtrl.$inject=["$scope","$rootScope"];finitureCtrl.$inject=["$scope","$rootScope"];lineeCtrl.$inject=["$scope","$rootScope"];settoriLineeCtrl.$inject=["$scope","$rootScope"];
tabelleFinitureCtrl.$inject=["$scope","$rootScope"];abbinamentiCtrl.$inject=["$scope","$rootScope"];prodottiCtrl.$inject=["$scope","$rootScope"];vetrineCtrl.$inject=["$scope","$rootScope"];vetrineProdottiCtrl.$inject=["$scope","$rootScope"];provinceCtrl.$inject=["$scope","$rootScope"];convenzioniCtrl.$inject=["$scope","$rootScope"];rivenditoriCtrl.$inject=["$scope","$rootScope"];
function categorieCtrl(c,b){c.entity=new b.Model;c.entity.categoria={show:1,posizione:0,immagine:!1};c.selectItem=function(a){c.entity.categoria={id:a.cat_id,nome:a.cat_nome,posizione:a.cat_pos,show:a.cat_show,immagine:"/dashboard/archivio_dati/Categorie/"+a.cat_id+".jpg",descrizione:a.cat_txt}};c.$on("updateTable",function(){return b.settings.load("categorie",!0)});b.settings.load("categorie")}
function settoriCtrl(c,b){c.entity=new b.Model;c.entity.settore={show:1,posizione:0,homepage:0,categoria:!1,immagine:!1};c.selectItem=function(a){c.entity.settore={id:a.set_id,nome:a.set_nome,categoria:a.set_cat_id,posizione:a.set_pos,show:a.set_show,homepage:a.set_home,immagine:"/dashboard/archivio_dati/Settori/"+a.set_id+".jpg",descrizione:a.set_txt}};c.$on("updateTable",function(){return b.settings.load("settori",!0)});b.settings.load("settori");b.settings.load("categorie")}
function marchiCtrl(c,b){c.entity=new b.Model;c.entity.marchio={show:1,categorie:b.categorie?b.settings.checklist.categorie("categorie","cat"):[],listino:0,sconto:0};c.selectItem=function(a){c.entity.marchio={id:a.mark_id,nome:a.mark_nome,show:a.mark_show,listino:a.mark_list,sconto:a.mark_disc};c.entity.marchio.categorie=b.settings.checklist.categorie("categorie","cat",a.mark_cat_array)};c.$on("updateTable",function(){return b.settings.load("marchi",!0)});b.settings.load("categorie");b.settings.load("marchi");
b.$on("categorie",function(){c.entity.marchio.categorie=b.settings.checklist.categorie("categorie","cat")})}function tabelleProdottiCtrl(c,b){c.entity=new b.Model;c.entity.tabella_prodotti={posizione:0,marchio:!1};c.selectItem=function(a){c.entity.tabella_prodotti={id:a.tbpr_id,nome:a.tbpr_nome,posizione:a.tbpr_pos,marchio:a.tbpr_mark_id}};c.$on("updateTable",function(){return b.settings.load("tabelle_prodotti",!0)});b.settings.load("marchi");b.settings.load("tabelle_prodotti")}
function finitureCtrl(c,b){c.entity=new b.Model;c.entity.finitura={show:1,tipo:0,marchio:!1,immagine:!1};c.selectItem=function(a){var d=a.fin_nome,e=a.fin_cod,f=a.fin_mark_id,h=b.settings.replaceAll(d," ","_"),g=b.settings.replaceAll(e," ","_"),k=b.settings.replaceAll(b.settings.convert(f,"marchi","mark_id","mark_nome")," ","_");c.entity.finitura={id:a.fin_id,nome:d,codice:e,marchio:f,show:a.fin_show,tipo:a.fin_type_id,immagine:"../dashboard/archivio_dati/"+k+"/Finiture/"+(h+"_"+g+".jpg")}};c.$on("updateTable",
function(){return b.settings.load("finiture",!0)});b.settings.load("marchi");b.settings.load("finiture")}
function lineeCtrl(c,b){c.entity=new b.Model;c.entity.linea={show:1,vetrina:0,posizione:0,consegna:25,garanzia:2,sconto:0,marchio:!1,categoria:!1,catalogo:"",specifiche:"",abbinamenti:[]};c.selectItem=function(a){c.entity.linea={id:a.line_id,nome:a.line_nome,marchio:a.line_mark_id,categoria:a.line_cat,show:a.line_show,posizione:a.line_pos,consegna:a.line_time,vetrina:a.line_vtr,garanzia:a.line_war,sconto:a.line_disc,catalogo:a.line_pdf_file,specifiche:a.line_spec_file,abbinamenti:a.line_link}};c.$on("updateTable",
function(){return b.settings.load("linee",!0)});b.settings.load("marchi");b.settings.load("settori");b.settings.load("categorie");b.settings.load("linee")}
function settoriLineeCtrl(c,b){c.entity=new b.Model;c.entity.settore_linea={show:1,prezzo:3,marchio:!1,linea:!1,settore:!1,immagine:!1};c.selectItem=function(a){var d=a.stln_mark_id,e=a.stln_line_id,f=a.stln_set_id,h=b.settings.replaceAll(b.settings.convert(d,"marchi","mark_id","mark_nome")," ","_"),g=b.settings.replaceAll(b.settings.convert(e,"linee","line_id","line_nome")," ","_"),k=b.settings.replaceAll(b.settings.convert(f,"settori","set_id","set_nome")," ","_");c.entity.settore_linea={id:a.stln_id,
marchio:d,linea:e,settore:f,show:a.stln_show,prezzo:a.stln_price,immagine:"../dashboard/archivio_dati/"+h+"/"+g+"/Vetrina/"+(g+"_"+k+".jpg")}};c.$on("updateTable",function(){return b.settings.load("settori_linee",!0)});b.settings.load("marchi");b.settings.load("linee");b.settings.load("settori");b.settings.load("settori_linee")}
function tabelleFinitureCtrl(c,b){c.entity=new b.Model;c.entity.tabella_finitura={linea:!1,marchio:!1};c.selectItem=function(a){c.entity.tabella_finitura={id:a.tab_id,nome:a.tab_nome,linea:a.tab_line_id,marchio:a.tab_mark_id}};c.$on("updateTable",function(){return b.settings.load("tabelle_finiture",!0)});b.settings.load("marchi");b.settings.load("linee");b.settings.load("tabelle_finiture")}
function abbinamentiCtrl(c,b){c.entity=new b.Model;c.entity.abbinamento={marchio:!1,linea:!1,tabella:!1,abbinamenti:[{i:!1,n:""}]};c.selectItem=function(a){c.entity.abbinamento={id:a.abb_id,codice:a.abb_cod,marchio:a.abb_mark_id,linea:a.abb_line_id,tabella:a.abb_tab,abbinamenti:angular.copy(a.abb_array)}};c.$on("updateTable",function(){return b.settings.load("abbinamenti",!0)});b.settings.load("marchi");b.settings.load("linee");b.settings.load("tabelle_finiture");b.settings.load("finiture");b.settings.load("abbinamenti")}
function prodottiCtrl(c,b){c.entity=new b.Model;c.entity.prodotto={posizione:0,prezzi:[{z:0,a:!1}],marchio:!1,linea:!1,finitura_linea:!1,tabella:!1,finitura_tipo:0,finitura_unica:0,immagine:!1};c.selectItem=function(a){var d=a.prd_mark_id,e=a.prd_line_id,f=a.prd_cod,h=b.settings.replaceAll(b.settings.convert(d,"marchi","mark_id","mark_nome")," ","_"),g=b.settings.replaceAll(b.settings.convert(e,"linee","line_id","line_nome")," ","_"),k=f+".jpg";c.entity.prodotto={id:a.prd_id,codice:f,titolo:a.prd_title,
dimensioni:a.prd_dim,note:a.prd_note,tabella:a.prd_tbpr,marchio:d,linea:e,prezzi:angular.copy(a.prd_price_array),posizione:a.prd_pos,finitura_linea:a.prd_lnfn_id,finitura_unica:a.prd_abb,finitura_tipo:a.prd_fin,show:a.prd_show,immagine:"../dashboard/archivio_dati/"+h+"/"+g+"/Prodotti/"+k}};c.$on("updateTable",function(){return b.settings.load("prodotti",!0)});b.settings.load("marchi");b.settings.load("linee");b.settings.load("finiture");b.settings.load("abbinamenti");b.settings.load("tabelle_finiture");
b.settings.load("tabelle_prodotti");b.settings.load("prodotti")}
function vetrineCtrl(c,b){c.entity=new b.Model;c.entity.vetrina={show:1,posizione:0,categoria:28,settori:[]};c.selectItem=function(a){var d=a.cmp_mark_id,e=a.cmp_line_id,f=a.cmp_nome,h=b.settings.replaceAll(b.settings.convert(d,"marchi","mark_id","mark_nome")," ","_"),g=b.settings.replaceAll(b.settings.convert(e,"linee","line_id","line_nome")," ","_");c.entity.vetrina={id:a.cmp_id,nome:f,marchio:d,categoria:a.cmp_cat_id,linea:e,show:a.cmp_show,posizione:a.cmp_pos,titolo:a.cmp_title,note:a.cmp_note,
immagine:"../dashboard/archivio_dati/"+h+"/"+g+"/Vetrina/"+(g+"_"+f+".jpg")};c.entity.vetrina.settori=b.settings.checklist.settori("settori","set",a.cmp_settore)};c.$on("updateTable",function(){return b.settings.load("vetrine",!0)});b.settings.load("categorie");b.settings.load("settori");b.settings.load("marchi");b.settings.load("linee");b.settings.load("vetrine");b.$on("vetrine",function(){c.entity.vetrina.settori=b.settings.checklist.settori("settori","set")})}
function vetrineProdottiCtrl(c,b){c.entity=new b.Model;c.entity.vetrina_prodotto={posizione:0,tabella:!1,finitura:!1,quantita:1,articolo:{id:!1,marchio:!1,linea:!1},composizione:{id:!1,marchio:!1,linea:!1}};c.selectItem=function(a){c.entity.vetrina_prodotto={id:a.cmpr_id,posizione:a.cmpr_pos,tabella:a.cmpr_tab,finitura:a.cmpr_cod,quantita:a.cmpr_qnt,articolo:{id:a.cmpr_prd,marchio:a.cmpr_mark_id,linea:a.cmpr_line_id},composizione:{id:a.cmpr_comp,marchio:a.cmpr_mark_cmp_id,linea:a.cmpr_line_cmp_id}}};
c.$on("updateTable",function(){return b.settings.load("vetrine_prodotti",!0)});b.settings.load("marchi");b.settings.load("linee");b.settings.load("tabelle_finiture");b.settings.load("abbinamenti");b.settings.load("prodotti");b.settings.load("vetrine");b.settings.load("vetrine_prodotti")}
function provinceCtrl(c,b){c.entity=new b.Model;c.entity.provincia={regione:!1,nazione:1,trasporto:{tipologia:1,importo:0},montaggio:{tipologia:1,importo:0},minimo:{limite:0,importo:0}};c.selectItem=function(a){c.entity.provincia={id:a.provincia_id,regione:a.regione_id,nazione:a.nazione_id,provincia:a.provincia,sigla:a.sigla,trasporto:{tipologia:a.trasporto_type,importo:a.trasporto},montaggio:{tipologia:a.montaggio_type,importo:a.montaggio},minimo:{limite:a.limite,importo:a.minimo}}};c.$on("updateTable",
function(){return b.settings.load("province",!0)});b.settings.load("nazioni");b.settings.load("regioni");b.settings.load("province")}function convenzioniCtrl(c,b){c.entity=new b.Model;c.entity.convenzione={};c.selectItem=function(a){c.entity.convenzione={id:a.cnv_id,nome:a.cnv_nome,email:a.cnv_email}};c.$on("updateTable",function(){return b.settings.load("convenzioni",!0)});b.settings.load("convenzioni")}
function rivenditoriCtrl(c,b){c.entity=new b.Model;c.entity.rivenditore={nazione:1,regione:!1,provincia:!1,convenzione:0,website:"",telefono:"",fax:"",mobile:"",notes:"",trasporto:{tipologia:1,importo:0},montaggio:{tipologia:1,importo:0},minimo:{limite:0,importo:0},marchi:[],immagine:!1};c.selectItem=function(a){var b=a.riv_id;c.entity.rivenditore={id:b,nome:a.riv_nome,nazione:a.riv_naz,regione:a.riv_reg,provincia:a.riv_prov,convenzione:a.riv_conv,referente:a.riv_rif,sede:a.riv_sede,telefono:a.riv_tel,
fax:a.riv_fax,mobile:a.riv_cell,website:a.riv_web,email:a.riv_email,password:a.riv_psw,note:a.riv_notes,trasporto:{tipologia:a.riv_trasporto_type,importo:a.riv_trasporto},montaggio:{tipologia:a.riv_montaggio_type,importo:a.riv_montaggio},minimo:{limite:a.riv_limite,importo:a.riv_minimo},marchi:angular.copy(a.riv_mark),immagine:"../dashboard/archivio_dati/Rivenditori/"+b+".jpg"}};c.$on("updateTable",function(){return b.settings.load("rivenditori",!0)});b.settings.load("convenzioni",!0);b.settings.load("province");
b.settings.load("regioni");b.settings.load("nazioni");b.settings.load("marchi");b.settings.load("rivenditori")};
