var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,c,f){a instanceof String&&(a=String(a));for(var k=a.length,e=0;e<k;e++){var d=a[e];if(c.call(f,d,e,a))return{i:e,v:d}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,f){a!=Array.prototype&&a!=Object.prototype&&(a[c]=f.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,c,f,k){if(c){f=$jscomp.global;a=a.split(".");for(k=0;k<a.length-1;k++){var e=a[k];e in f||(f[e]={});f=f[e]}a=a[a.length-1];k=f[a];c=c(k);c!=k&&null!=c&&$jscomp.defineProperty(f,a,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,f){return $jscomp.findInternal(this,a,f).v}},"es6","es3");
angular.module("mpuDashboard").controller("mainCtrl",["$scope","$rootScope","$location","_","$cookies","dataSvc","$timeout","dashboardPages",function(a,c,f,k,e,d,h,g){a.vm={currentPage:1,itemsPerPage:10,maxSize:10,dummy:{image:!1},categorie:!1,marchi:!1,nuovaCategoria:{v:1,r:!1},nuovoSettore:{v:1,g:!1,r:!1,o:0},nuovoMarchio:{v:1,g:[],b:0,s:0},nuovaTbpr:{y:1,m:!1},nuovaFinitura:{v:1,p:0,m:!1,r:!1},nuovaLinea:{a:[!1],q:[],v:1,z:2,b:0,y:100,c:0,s:0,e:25,w:2,g:!1,r:!1,k:!1,j:!1},nuovaFinituraTabella:{m:!1,
l:!1},nuovoAbbinamento:{m:!1,l:!1,u:!1,f:[{i:!1,n:""}]},nuovoProdotto:{m:!1,l:!1,t:!1,a:"",y:1,f:0,z:[{z:"",a:""}]},nuovaLineaSettore:{v:1,p:0,z:1,q:[],m:!1,r:!1},nuovoProdottoSettore:{m:!1,l:!1,c:!1,h:[]},nuovaVetrina:{m:!1,l:!1,v:1,y:1},nuovoVetrinaProdotto:{c:!1,p:!1,m:!1,k:!1,l:!1,j:!1,u:!1,f:!1,y:1,q:1},nuovaEsposizione:{m:!1,l:!1,t:!1,y:1},nuovoEsposizioneProdotto:{c:!1,p:!1,m:!1,k:!1,l:!1,j:!1,u:!1,f:!1,y:1,q:1},nuovoEsposizioneSettore:{m:!1,l:!1,c:!1,v:0,h:[]},nuovoComposto:{m:!1,l:!1,y:1},
nuovoCompostoProdotto:{c:!1,p:!1,m:!1,k:!1,l:!1,j:!1,u:!1,f:!1,y:1,q:1},nuovoCompostoSettore:{m:!1,l:!1,c:!1,v:0,h:[]},nuovaNazione:{v:1},nuovaRegione:{z:!1},nuovaProvincia:{z:!1,r:!1,b:0,l:0,t:0,j:1,m:0,k:1},nuovaConvenzione:{},nuovoAgente:{r:!1},nuovoRivenditore:{z:!1,r:!1,p:!1,b:0,l:0,t:0,j:1,m:0,k:1,v:!1,c:"",h:"",f:"",a:""}};a.vm.ftscroller={scrollbars:!0,scrollingX:!1,snap:!0,momentum:!0,hScrollbar:!1,updateOnWindowResize:!0,updateOnChanges:!0};a.filtro={show:"",categoria:{i:!1},settore:"",
marchio:{i:!1,n:""},tbpr:{i:!1,n:""},finitura:{i:!1,n:"",c:""},linea:{i:!1,n:""},newLinea:{i:!1,n:""},finituraTabella:{i:!1,n:""},abbinamento:{i:!1,c:""},lineaSettore:{i:!1,n:"",c:""},prodotto:{c:""},prodottoSettore:{n:""},vetrina:{c:""},vetrinaProdotto:{c:"",p:""},esposizione:{c:""},esposizioneProdotto:{e:"",p:""},esposizioneSettore:{c:""},composto:{c:""},compostoProdotto:{c:"",p:""},compostoSettore:{c:""},nazione:{i:""},regione:{n:"",i:""},provincia:{n:""},convenzione:{n:""},rivenditore:{n:""},
agente:{r:""}};a.$watch("filtro.marchio.i",function(){a.filtro.linea.n="";a.filtro.linea.i=!1});a.errore={marchio:!1,tbpr:!1,finitura:!1,linea:!1,finituraTabella:!1,abbinamento:!1,lineaSettore:!1,prodotto:!1,prodottoSettore:!1,vetrina:!1,vetrinaProdotto:!1,esposizione:!1,esposizioneProdotto:!1,composto:!1,compostoProdotto:!1,regione:!1,provincia:!1,rivenditore:!1,agente:!1};c.saving=!1;c.changing=!1;a.vm.changeLink=function(b){f.path(b.link);a.vm.currentPage=1;a.vm.itemsPerPage=10;a.filtro.show=""};
a.$on("$locationChangeSuccess",function(){var b=f.path();switch(!0){case "/categorie"==b:a.vm.currentLink="categorie";break;case "/settori"==b:a.vm.currentLink="settori";break;case "/marchi"===b||"/marchiTabelle"===b:a.vm.currentLink="gestione marchi";a.vm.currentSubLink=b.slice(1);break;case "/finiture"==b||"/finitureTabelle"==b||"/abbinamenti"==b:a.vm.currentLink="gestione finiture";a.vm.currentSubLink=b.slice(1);break;case "/linee"==b||"/lineeSettori"==b:a.vm.currentLink="gestione linee";a.vm.currentSubLink=
b.slice(1);break;case "/prodotti"==b||"/prodottiSettori"==b:a.vm.currentLink="gestione prodotti";a.vm.currentSubLink=b.slice(1);break;case "/esposizioni"==b||"/esposizioniProdotti"==b||"/esposizioniSettori"==b:a.vm.currentLink="gestione esposizioni";a.vm.currentSubLink=b.slice(1);break;case "/composti"==b||"/compostiProdotti"==b||"/compostiSettori"==b:a.vm.currentLink="gestione composizioni";a.vm.currentSubLink=b.slice(1);break;case "/vetrine"==b||"/vetrineProdotti"==b:a.vm.currentLink="gestione vetrine";
a.vm.currentSubLink=b.slice(1);break;case "/nazioni"==b||"/regioni"==b||"/province"==b:a.vm.currentLink="mappa";a.vm.currentSubLink=b.slice(1);break;case "/rivenditori"==b||"/agenti"==b||"/convenzioni"==b:a.vm.currentLink="distribuzione";a.vm.currentSubLink=b.slice(1);break;default:a.vm.currentLink="home"}});d.categorie().then(function(b){a.vm.categorie=b.data;a.vm.catPerFilter=angular.copy(a.vm.categorie);a.vm.catPerFilter.unshift({i:!1,n:" Tutte le categorie"});a.vm.nuovaCategoria.i=k.max(a.vm.categorie,
function(a){return a.i}).i+1});d.settori().then(function(b){a.vm.settori=b.data;a.vm.nuovoSettore.i=k.max(a.vm.settori,function(a){return a.i}).i+1});d.marchi().then(function(b){a.vm.marchi=b.data;a.vm.markPerFilter=angular.copy(a.vm.marchi);a.vm.markPerFilter.unshift({i:!1,n:" Tutti i marchi"});a.vm.nuovoMarchio.i=k.max(a.vm.marchi,function(a){return a.i}).i+1});d.tbpr().then(function(b){a.vm.tbpr=b.data;a.vm.nuovaTbpr.i=k.max(a.vm.tbpr,function(a){return a.i}).i+1});d.finitureTabelle().then(function(b){a.vm.finitureTabelle=
b.data;a.vm.nuovaFinituraTabella.i=k.max(a.vm.finitureTabelle,function(a){return a.i}).i+1});d.finiture().then(function(b){a.vm.finiture=b.data;a.vm.nuovaFinitura.i=k.max(a.vm.finiture,function(a){return a.i}).i+1});d.abbinamenti().then(function(b){a.vm.abbinamenti=b.data;a.vm.nuovoAbbinamento.i=k.max(a.vm.abbinamenti,function(a){return a.i}).i+1});d.prodotti().then(function(b){a.vm.prodotti=b.data;a.vm.nuovoProdotto.i=k.max(a.vm.prodotti,function(a){return a.i}).i+1});d.lineeSettori().then(function(b){a.vm.lineeSettori=
b.data;a.vm.nuovaLineaSettore.i=k.max(a.vm.lineeSettori,function(a){return a.i}).i+1});d.prodottiSettori().then(function(b){a.vm.prodottiSettori=b.data;a.vm.nuovoProdottoSettore.i=k.max(a.vm.prodottiSettori,function(a){return a.i}).i+1});d.linee().then(function(b){a.vm.linee=b.data;a.vm.nuovaLinea.i=k.max(a.vm.linee,function(a){return a.i}).i+1});d.vetrine().then(function(b){a.vm.vetrine=b.data;a.vm.nuovaVetrina.i=k.max(a.vm.vetrine,function(a){return a.i}).i+1});d.vetrineProdotti().then(function(b){a.vm.vetrineProdotti=
b.data;a.vm.nuovoVetrinaProdotto.i=k.max(a.vm.vetrineProdotti,function(a){return a.i}).i+1});d.esposizioni().then(function(b){a.vm.esposizioni=b.data;a.vm.nuovaEsposizione.i=k.max(a.vm.esposizioni,function(a){return a.i}).i+1});d.esposizioniProdotti().then(function(b){a.vm.esposizioniProdotti=b.data;a.vm.nuovoEsposizioneProdotto.i=k.max(a.vm.esposizioniProdotti,function(a){return a.i}).i+1});d.esposizioniSettori().then(function(b){a.vm.esposizioniSettori=b.data;a.vm.nuovoEsposizioneSettore.i=k.max(a.vm.esposizioniSettori,
function(a){return a.i}).i+1});d.composti().then(function(b){a.vm.composti=b.data;a.vm.nuovoComposto.i=k.max(a.vm.composti,function(a){return a.i}).i+1});d.compostiProdotti().then(function(b){a.vm.compostiProdotti=b.data;a.vm.nuovoCompostoProdotto.i=k.max(a.vm.compostiProdotti,function(a){return a.i}).i+1});d.compostiSettori().then(function(b){a.vm.compostiSettori=b.data;a.vm.nuovoCompostoSettore.i=k.max(a.vm.compostiSettori,function(a){return a.i}).i+1});d.nazioni().then(function(b){a.vm.nazioni=
b.data;a.vm.nuovaNazione.i=0==a.vm.nazioni.length?1:k.max(a.vm.nazioni,function(a){return a.i}).i+1});d.regioni().then(function(b){a.vm.regioni=b.data;a.vm.nuovaRegione.i=0==a.vm.regioni.length?1:k.max(a.vm.regioni,function(a){return a.i}).i+1});d.province().then(function(b){a.vm.province=b.data;a.vm.nuovaProvincia.i=0==a.vm.province.length?1:k.max(a.vm.province,function(a){return a.i}).i+1});d.convenzioni().then(function(b){a.vm.convenzioni=b.data;a.vm.nuovaConvenzione.i=0==a.vm.convenzioni.length?
1:k.max(a.vm.convenzioni,function(a){return a.i}).i+1});d.agenti().then(function(b){a.vm.agenti=b.data?b.data:[];a.vm.nuovoAgente.i=0==a.vm.agenti.length?1:k.max(a.vm.agenti,function(a){return a.i}).i+1});d.rivenditori().then(function(b){a.vm.rivenditori=b.data;a.vm.nuovoRivenditore.i=k.max(a.vm.rivenditori,function(a){return a.i}).i+1});a.sorting=function(b){a.vm.sorting=a.vm.sorting==b?"-"+b:b};a.convert=function(b,l,c){var m=[],d="";if("object"===typeof b){for(var e=0;e<b.length;e++)k.each(a.vm[l],
function(a){a.i==b[e]&&m.push(a[c])});return m}k.each(a.vm[l],function(a){a.i==b&&(d=a[c])});return d};Number.prototype.formatMoney=function(a,l,c){var b=this;a=isNaN(a=Math.abs(a))?2:a;l=void 0==l?".":l;c=void 0==c?",":c;var d=0>b?"-":"",m=parseInt(b=Math.abs(+b||0).toFixed(a))+"",e=3<(e=m.length)?e%3:0;return d+(e?m.substr(0,e)+c:"")+m.substr(e).replace(/(\d{3})(?=\d)/g,"$1"+c)+(a?l+Math.abs(b-m).toFixed(a).slice(2):"")};a.convertPrice=function(a){return a.formatMoney(2,",",".")};a.convertFinType=
function(a){return 0==a?"Finitura":"Rivestimento"};a.convertPriceType=function(a){switch(a){case 1:return"Best price";case 2:return"Economico";case 3:return"Design";case 4:return"Alto design";case 5:return"Luxury"}};a.vm.links=g}]);
angular.module("mpuDashboard").controller("categorieCtrl",["$scope","$rootScope","_","dataSvc","$http",function(a,c,f,k,e){a.selectItem=function(c){a.categorie={};a.categorie.selected=!0;a.categorie.categoria=c};a.vm.saveCategorieData=function(){c.saving=!0;e.post("php/categorie.php?type=save",a.vm.categorie).success(function(){c.saving=!1}).error(function(a,c){console.log(c)})};a.saveDataDB=function(){c.saving=!0;e.post("php/categorie.php?type=db",a.vm.categorie).success(function(){c.saving=!1;k.categorie().then(function(c){a.vm.categorie=
c.data})}).error(function(a,c){console.log(c)})};a.updateCheck=function(){return!a.vm.nuovaCategoria.n||!a.vm.nuovaCategoria.r||!a.vm.nuovaCategoria.x||isNaN(a.vm.nuovaCategoria.y)};a.action=function(d){"N"==d&&(c.saving=!0,e.post("php/categorie.php?type=new",{id:a.vm.nuovaCategoria.i,nome:a.vm.nuovaCategoria.n,pos:a.vm.nuovaCategoria.y,show:a.vm.nuovaCategoria.v,image:a.vm.nuovaCategoria.r,text:a.vm.nuovaCategoria.x}).success(function(d){a.vm.categorie.push(a.vm.nuovaCategoria);a.vm.nuovaCategoria=
{v:1,r:!1,i:a.vm.nuovaCategoria.i+1};a.vm.saveCategorieData();c.saving=!1}).error(function(a,c){console.log(c)}))}}]);
angular.module("mpuDashboard").controller("settoriCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout",function(a,c,f,k,e,d){a.settori={selected:!1};a.selectSettore=function(b){a.settori={};a.settori.selected=!0;a.settori.settore=b};a.vm.saveSettoriData=function(){c.saving=!0;e.post("php/settori.php?type=save",a.vm.settori).success(function(){c.saving=!1}).error(function(a,l){console.log(l)})};a.saveDataDB=function(){c.saving=!0;e.post("php/settori.php?type=db").success(function(){c.saving=
!1;k.settori().then(function(b){a.vm.settori=b.data})}).error(function(a,l){console.log(l)})};var h="",g;a.$watch("input",function(b){g&&d.cancel(g);h=b;g=d(function(){a.filtro.settore=h},250)});a.eraseInput=function(b){27==b.keyCode&&(a.input="")};a.updateCheck=function(){return!a.vm.nuovoSettore.n||isNaN(a.vm.nuovoSettore.y)||!a.vm.nuovoSettore.g||!a.vm.nuovoSettore.r||!a.vm.nuovoSettore.x};a.action=function(b){"N"==b&&(c.saving=!0,e.post("php/settori.php?type=new",{id:a.vm.nuovoSettore.i,nome:a.vm.nuovoSettore.n,
pos:a.vm.nuovoSettore.y,show:a.vm.nuovoSettore.v,cat:a.vm.nuovoSettore.g,image:a.vm.nuovoSettore.r,text:a.vm.nuovoSettore.x,home:a.vm.nuovoSettore.o}).success(function(b){delete a.vm.nuovoSettore.r;a.vm.settori.push(a.vm.nuovoSettore);a.vm.nuovoSettore={v:1,i:a.vm.nuovoSettore.i+1,g:!1,r:!1,o:0};a.vm.saveSettoriData();c.saving=!1}).error(function(a,b){console.log(b)}))}}]);
angular.module("mpuDashboard").controller("marchiCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout",function(a,c,f,k,e,d){a.marchi={selected:!1};a.vm.sorting="n";a.selectMarchio=function(b){a.marchi={};a.marchi.selected=!0;a.marchi.marchio=b};a.vm.saveMarchiData=function(){c.saving=!0;e.post("php/marchi.php?type=save",a.vm.marchi).success(function(){c.saving=!1}).error(function(a,l){console.log(l)})};a.saveDataDB=function(){c.saving=!0;e.post("php/marchi.php?type=db",a.vm.marchi).success(function(){c.saving=
!1;k.marchi().then(function(b){a.vm.marchi=b.data})}).error(function(a,l){console.log(l)})};var h="",g;a.$watch("input",function(b){g&&d.cancel(g);h=b;g=d(function(){a.filtro.marchi=h},250)});a.eraseInput=function(b){27==b.keyCode&&(a.input="")};a.toggleSet=function(b){-1==a.vm.nuovoMarchio.g.indexOf(b)?a.vm.nuovoMarchio.g.push(parseInt(b)):a.vm.nuovoMarchio.g.splice(a.vm.nuovoMarchio.g.indexOf(b),1)};a.checkList=function(b){return-1!=a.vm.nuovoMarchio.g.indexOf(b)};a.updateCheck=function(){return!a.vm.nuovoMarchio.n||
0==a.vm.nuovoMarchio.g.length||isNaN(a.vm.nuovoMarchio.b)||isNaN(a.vm.nuovoMarchio.s)};a.newMarchio=function(){c.saving=!1;a.marchi.selected=!1;a.vm.nuovoMarchio={v:1,i:a.vm.nuovoMarchio.i+1,g:[],b:0,s:0};a.errore.marchio=!1};a.action=function(b){if("N"==b)if(f.findWhere(a.vm.marchi,{n:a.vm.nuovoMarchio.n}))a.errore.marchio=!0;else{c.saving=!0;b=document.getElementsByClassName("categorieCheck");for(var l=0;b[l];++l)b[l].checked&&(b[l].checked=!1);e.post("php/marchi.php?type=new",{id:a.vm.nuovoMarchio.i,
nome:a.vm.nuovoMarchio.n,show:a.vm.nuovoMarchio.v,list:a.vm.nuovoMarchio.b,disc:a.vm.nuovoMarchio.s,cat_array:a.vm.nuovoMarchio.g}).success(function(b){a.vm.marchi.push(a.vm.nuovoMarchio);a.newMarchio();a.vm.saveMarchiData()}).error(function(a,b){console.log(b)})}}}]);
angular.module("mpuDashboard").controller("marchiTabelleCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout",function(a,c,f,k,e,d){a.tbpr={selected:!1};a.vm.sorting=["m","y"];a.selectTbpr=function(b){a.tbpr={};a.tbpr.selected=!0;a.tbpr.tbpr=b};a.vm.saveTbprData=function(){c.saving=!0;e.post("php/marchiTabelle.php?type=save",a.vm.tbpr).success(function(){c.saving=!1}).error(function(a,l){console.log(l)})};a.saveDataDB=function(){c.saving=!0;e.post("php/marchiTabelle.php?type=db").success(function(){c.saving=
!1;k.tbpr().then(function(b){a.vm.tbpr=b.data})}).error(function(a,l){console.log(l)})};var h="",g;a.$watch("input",function(b){g&&d.cancel(g);h=b;g=d(function(){a.filtro.tbpr.n=h},250)});a.eraseInput=function(b){27==b.keyCode&&(a.input="")};a.updateCheck=function(){return!a.vm.nuovaTbpr.n||isNaN(a.vm.nuovaTbpr.y)||!a.vm.nuovaTbpr.m};a.newTbpr=function(){c.saving=!1;a.errore.tbpr=!1;a.vm.nuovaTbpr={i:a.vm.nuovaTbpr.i+1,m:!1,y:1}};a.action=function(b){"N"==b&&(f.findWhere(a.vm.tbpr,{n:a.vm.nuovaTbpr.n,
m:a.vm.nuovaTbpr.m})?a.errore.tbpr=!0:(c.saving=!0,e.post("php/marchiTabelle.php?type=new",{id:a.vm.nuovaTbpr.i,nome:a.vm.nuovaTbpr.n,pos:a.vm.nuovaTbpr.y,mark:a.vm.nuovaTbpr.m}).success(function(b){console.log("Risposta dalla pagina PHP",b);a.vm.tbpr.push(a.vm.nuovaTbpr);a.vm.nuovaTbpr={i:a.vm.nuovaTbpr.i+1,m:!1};a.vm.saveTbprData();a.newTbpr()}).error(function(a,b){console.log(b)})))}}]);
angular.module("mpuDashboard").controller("finitureCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout",function(a,c,f,k,e,d){a.finitura={selected:!1};a.vm.sorting=["m","n"];a.switchType=function(){return 0==a.vm.nuovaFinitura.p?"finitura":"rivestimento"};a.selectFinitura=function(b){a.finitura={};a.finitura.selected=!0;a.finitura.finitura=b};a.vm.saveFinituraData=function(){c.saving=!0;e.post("php/finiture.php?type=save",a.vm.finiture).success(function(){c.saving=!1}).error(function(a,l){console.log(l)})};
a.saveDataDB=function(){c.saving=!0;e.post("php/finiture.php?type=db").success(function(){c.saving=!1;k.finiture().then(function(b){a.vm.finiture=b.data})}).error(function(a,l){console.log(l)})};var h="",g;a.$watch("input",function(b){g&&d.cancel(g);h=b;g=d(function(){a.filtro.finitura.n=h},250)});a.$watch("inputCod",function(b){g&&d.cancel(g);h=b;g=d(function(){a.filtro.finitura.c=h},250)});a.eraseInput=function(b,l){27==b.keyCode&&(l?a.inputCod="":a.input="")};a.updateCheck=function(){return!a.vm.nuovaFinitura.n||
!a.vm.nuovaFinitura.c||!a.vm.nuovaFinitura.m||!a.vm.nuovaFinitura.r};a.newFinitura=function(){c.saving=!1;a.errore.finitura=!1;a.vm.nuovaFinitura={i:a.vm.nuovaFinitura.i+1,v:1,p:0,m:!1,r:!1}};a.action=function(b){"N"==b&&(f.findWhere(a.vm.finiture,{n:a.vm.nuovaFinitura.n,c:a.vm.nuovaFinitura.c,m:a.vm.nuovaFinitura.m})?a.errore.finitura=!0:(c.saving=!0,e.post("php/finiture.php?type=new",{id:a.vm.nuovaFinitura.i,nome:a.vm.nuovaFinitura.n,cod:a.vm.nuovaFinitura.c,show:a.vm.nuovaFinitura.v,mark:a.vm.nuovaFinitura.m,
image:a.vm.nuovaFinitura.r,type:a.vm.nuovaFinitura.p}).success(function(b){console.log("Risposta dalla pagina PHP",b);delete a.vm.nuovaFinitura.r;a.vm.finiture.push(a.vm.nuovaFinitura);a.vm.saveFinituraData();a.newFinitura()}).error(function(a,b){console.log(b)})))}}]);
angular.module("mpuDashboard").controller("lineeCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout","lineeManager",function(a,c,f,k,e,d,h){a.linea={selected:!1};a.priceName=[{n:"economico",i:2},{n:"design",i:3},{n:"top class",i:4}];a.vm.sorting=["m","n","y"];a.vm.lineeManager=h;a.selectLinea=function(b){a.linea={};a.linea.selected=!0;a.linea.linea=b};a.vm.saveLineaData=function(){c.saving=!0;e.post("php/linee.php?type=save",a.vm.linee).success(function(){c.saving=!1}).error(function(a,b){console.log(b)})};
a.saveDataDB=function(){c.saving=!0;e.post("php/linee.php?type=db").success(function(){c.saving=!1;k.linee().then(function(b){a.vm.linee=b.data})}).error(function(a,b){console.log(b)})};a.saveDataDB();var g="",b;a.$watch("input",function(l){b&&d.cancel(b);g=l;b=d(function(){a.filtro.linea.n=g},250)});a.eraseInput=function(b){27==b.keyCode&&(a.input="")};a.addLink=function(){a.vm.nuovaLinea.a.push(!1)};a.removeLink=function(b){1==a.vm.nuovaLinea.a.length?a.vm.nuovaLinea.a=[!1]:a.vm.nuovaLinea.splice(b,
1)};a.toggleSet=function(b){-1==a.vm.nuovaLinea.q.indexOf(b)?a.vm.nuovaLinea.q.push(parseInt(b)):a.vm.nuovaLinea.q.splice(a.vm.nuovaLinea.q.indexOf(b),1)};a.updateCheck=function(){return!a.vm.nuovaLinea.n||isNaN(a.vm.nuovaLinea.e)||isNaN(a.vm.nuovaLinea.w)||isNaN(a.vm.nuovaLinea.s)||!a.vm.nuovaLinea.m};a.newLinea=function(){c.saving=!1;a.errore.linea=!1;a.vm.nuovaLinea={i:a.vm.nuovaLinea.i+1,q:[],a:[!1],v:1,z:2,b:0,y:100,c:0,s:0,e:25,w:2,g:!1,r:!1,k:!1,j:!1}};a.action=function(b){"N"==b&&(f.findWhere(a.vm.linee,
{nome:a.vm.nuovaLinea.n,mark:a.vm.nuovaLinea.m})?a.errore.linea=!0:(c.saving=!0,e.post("php/linee.php?type=new",{id:a.vm.nuovaLinea.i,nome:a.vm.nuovaLinea.n,mark:a.vm.nuovaLinea.m,disc:a.vm.nuovaLinea.s,time:a.vm.nuovaLinea.e,war:a.vm.nuovaLinea.w,ctl:a.vm.nuovaLinea.k,spc:a.vm.nuovaLinea.j,image:a.vm.nuovaLinea.r,show:a.vm.nuovaLinea.v,price:a.vm.nuovaLinea.z,cat:a.vm.nuovaLinea.g,set:a.vm.nuovaLinea.q,link:a.vm.nuovaLinea.a,vtr:a.vm.nuovaLinea.c,pos:a.vm.nuovaLinea.y}).success(function(b){console.log("Risposta dalla pagina PHP",
b);a.vm.nuovaLinea.k=a.vm.nuovaLinea.k?1:!1;a.vm.nuovaLinea.j=a.vm.nuovaLinea.j?1:!1;a.vm.linee.push(a.vm.nuovaLinea);a.vm.saveLineaData();a.newLinea()}).error(function(a,b){console.log(b)})))}}]);
angular.module("mpuDashboard").controller("finitureTabelleCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout",function(a,c,f,k,e,d){a.finituraTabella={selected:!1};a.vm.sorting=["m","l","n"];a.selectFinituraTabella=function(b){a.finituraTabella={};a.finituraTabella.selected=!0;a.finituraTabella.finituraTabella=b};a.vm.saveFinitureTabelleData=function(){c.saving=!0;e.post("php/finitureTabelle.php?type=save",a.vm.finitureTabelle).success(function(){c.saving=!1}).error(function(a,l){console.log(l)})};
a.saveDataDB=function(){c.saving=!0;e.post("php/finitureTabelle.php?type=db").success(function(b){c.saving=!1;k.finitureTabelle().then(function(b){a.vm.finitureTabelle=b.data})}).error(function(a,l){console.log(l)})};var h="",g;a.$watch("input",function(b){g&&d.cancel(g);h=b;g=d(function(){a.filtro.finituraTabella.n=h},250)});a.eraseInput=function(b){27==b.keyCode&&(a.input="")};a.newFinituraTabella=function(){c.saving=!1;a.errore.finituraTabella=!1;a.vm.nuovaFinituraTabella={i:a.vm.nuovaFinituraTabella.i+
1,m:!1,l:!1}};a.updateCheck=function(){return!a.vm.nuovaFinituraTabella.n||!a.vm.nuovaFinituraTabella.m||!a.vm.nuovaFinituraTabella.l};a.action=function(b){"N"==b&&(f.findWhere(a.vm.finitureTabelle,{n:a.vm.nuovaFinituraTabella.n,m:a.vm.nuovaFinituraTabella.m,l:a.vm.nuovaFinituraTabella.l})?a.errore.finituraTabella=!0:(c.saving=!0,e.post("php/finitureTabelle.php?type=new",{id:a.vm.nuovaFinituraTabella.i,nome:a.vm.nuovaFinituraTabella.n,line:a.vm.nuovaFinituraTabella.l,mark:a.vm.nuovaFinituraTabella.m}).success(function(b){a.vm.finitureTabelle.push(a.vm.nuovaFinituraTabella);
a.vm.saveFinitureTabelleData();a.newFinituraTabella()}).error(function(a,b){console.log(b)})))}}]);
angular.module("mpuDashboard").controller("abbinamentiCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout",function(a,c,f,k,e,d){function h(){return f.filter(a.vm.nuovoAbbinamento.f,function(a){return!a.i||!a.n}).length}a.abbinamento={selected:!1};a.vm.sorting=["m","l","c"];a.$watch("vm.nuovoAbbinamento.m",function(){a.vm.nuovoAbbinamento.l=!1;a.vm.nuovoAbbinamento.u=!1;a.vm.nuovoAbbinamento.f=[{i:!1,n:""}]});a.$watch("vm.nuovoAbbinamento.l",function(){a.vm.nuovoAbbinamento.u=!1;a.vm.nuovoAbbinamento.f=
[{i:!1,n:""}]});a.$watch("filtro.marchio.i",function(){a.filtro.linea.i=!1;a.filtro.finituraTabella.i=!1});a.$watch("filtro.linea.i",function(){a.filtro.finituraTabella.i=!1});a.addAbbinamento=function(){a.vm.nuovoAbbinamento.f.push({i:!1,n:""})};a.removeAbbinamento=function(b){a.vm.nuovoAbbinamento.f.splice(b,1)};a.selectAbbinamento=function(b){a.abbinamento={};a.abbinamento.selected=!0;a.abbinamento.abbinamento=b};a.vm.saveAbbinamentiData=function(){c.saving=!0;e.post("php/abbinamenti.php?type=save",
a.vm.abbinamenti).success(function(){c.saving=!1}).error(function(a,b){console.log(b)})};a.saveDataDB=function(){c.saving=!0;e.post("php/abbinamenti.php?type=db").success(function(b){console.log(b);c.saving=!1;k.abbinamenti().then(function(b){a.vm.abbinamenti=b.data})}).error(function(a,b){console.log(b)})};var g="",b;a.$watch("input",function(l){b&&d.cancel(b);g=l;b=d(function(){a.filtro.abbinamento.c=g},250)});a.eraseInput=function(b){27==b.keyCode&&(a.input="")};a.newAbbinamento=function(){c.saving=
!1;a.errore.abbinamento=!1;a.vm.nuovoAbbinamento={i:a.vm.nuovoAbbinamento.i+1,m:!1,l:!1,u:!1,f:[{i:!1,n:""}]}};a.updateCheck=function(){return!a.vm.nuovoAbbinamento.c||!a.vm.nuovoAbbinamento.u};a.action=function(b){"N"==b&&(f.findWhere(a.vm.abbinamenti,{c:a.vm.nuovoAbbinamento.c,l:a.vm.nuovoAbbinamento.l,u:a.vm.nuovoAbbinamento.u})||0!==h()?a.errore.abbinamento=!0:(c.saving=!0,e.post("php/abbinamenti.php?type=new",{id:a.vm.nuovoAbbinamento.i,cod:a.vm.nuovoAbbinamento.c,line:a.vm.nuovoAbbinamento.l,
mark:a.vm.nuovoAbbinamento.m,abb_array:a.vm.nuovoAbbinamento.f,tab:a.vm.nuovoAbbinamento.u}).success(function(b){a.vm.abbinamenti.push(a.vm.nuovoAbbinamento);a.vm.saveAbbinamentiData();a.newAbbinamento()}).error(function(a,b){console.log(b)})))}}]);
angular.module("mpuDashboard").controller("lineeSettoriCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout","lineeManager",function(a,c,f,k,e,d,h){a.lineaSettore={selected:!1};a.vm.lineeManager=h;a.vm.sorting=["m"];a.selectLineaSettore=function(b){a.lineaSettore={};a.lineaSettore.selected=!0;a.lineaSettore.lineaSettore=b};a.vm.saveLineaSettoreData=function(){c.saving=!0;e.post("php/lineeSettori.php?type=save",a.vm.lineeSettori).success(function(){c.saving=!1}).error(function(a,b){console.log(b)})};
a.saveDataDB=function(){c.saving=!0;e.post("php/lineeSettori.php?type=db").success(function(){c.saving=!1;k.lineeSettori().then(function(b){a.vm.lineeSettori=b.data})}).error(function(a,b){console.log(b)})};a.saveDataDB();var g="",b;a.$watch("input",function(l){b&&d.cancel(b);g=l;b=d(function(){a.filtro.lineaSettore.n=g},250)});a.$watch("inputCod",function(l){b&&d.cancel(b);g=l;b=d(function(){a.filtro.lineaSettore.c=g},250)});a.toggleSet=function(b){-1==a.vm.nuovaLineaSettore.q.indexOf(b)?a.vm.nuovaLineaSettore.q.push(parseInt(b)):
a.vm.nuovaLineaSettore.q.splice(a.vm.nuovaLineaSettore.q.indexOf(b),1)};a.checkList=function(b){return-1!=a.vm.nuovaLineaSettore.q.indexOf(b)};a.eraseInput=function(b,c){27==b.keyCode&&(c?a.inputCod="":a.input="")};a.updateCheck=function(){return!a.vm.nuovaLineaSettore.h||!a.vm.nuovaLineaSettore.l||!a.vm.nuovaLineaSettore.r};a.newItem=function(){c.saving=!1;a.vm.nuovaLineaSettore={i:a.vm.nuovaLineaSettore.i+1,v:1,p:0,z:1,q:[],m:!1,r:!1};a.errore.lineaSettore=!1};a.action=function(b){"N"==b&&(f.findWhere(a.vm.lineeSettori,
{m:a.vm.nuovaLineaSettore.m,l:a.vm.nuovaLineaSettore.l,h:a.vm.nuovaLineaSettore.h})||0==a.vm.nuovaLineaSettore.length?a.errore.lineaSettore=!0:(c.saving=!0,e.post("php/lineeSettori.php?type=new",{id:a.vm.nuovaLineaSettore.i,line:a.vm.nuovaLineaSettore.l,price:a.vm.nuovaLineaSettore.z,show:a.vm.nuovaLineaSettore.v,mark:a.vm.nuovaLineaSettore.m,man:a.vm.nuovaLineaSettore.q,image:a.vm.nuovaLineaSettore.r,set:a.vm.nuovaLineaSettore.h}).success(function(b){console.log("Risposta dalla pagina PHP",b);delete a.vm.nuovaLineaSettore.r;
a.vm.lineeSettori.push(a.vm.nuovaLineaSettore);a.vm.saveLineaSettoreData();a.newItem()}).error(function(a,b){console.log(b)})))}}]);
angular.module("mpuDashboard").controller("prodottiCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout",function(a,c,f,k,e,d){a.prodotto={selected:!1};a.vm.sorting="c";a.$watch("vm.nuovoProdotto.m",function(){a.vm.nuovoProdotto.l=!1;a.vm.nuovoProdotto.u=!1;a.vm.nuovoProdotto.t=!1;a.vm.nuovoProdotto.x=!1;a.vm.nuovoProdotto.z=[{z:"",a:""}]});a.$watch("vm.nuovoProdotto.l",function(){a.vm.nuovoProdotto.u=!1;a.vm.nuovoProdotto.t=!1;a.vm.nuovoProdotto.x=!1;a.vm.nuovoProdotto.z=[{z:"",a:""}]});
a.$watch("filtro.marchio.i",function(){a.filtro.linea.i=!1});a.addProdotto=function(){a.vm.nuovoProdotto.z.push({z:"",a:""})};a.removeProdotto=function(b){a.vm.nuovoProdotto.z.splice(b,1)};a.selectProdotto=function(b){a.prodotto={};a.prodotto.selected=!0;a.prodotto.prodotto=b};a.vm.saveProdottoData=function(){c.saving=!0;e.post("php/prodotti.php?type=save",a.vm.prodotti).success(function(){c.saving=!1}).error(function(a,b){console.log(b)})};a.saveDataDB=function(){c.saving=!0;e.post("php/prodotti.php?type=db").success(function(){c.saving=
!1;k.prodotti().then(function(b){a.vm.prodotti=b.data})}).error(function(a,b){console.log(b)})};var h="",g;a.$watch("input",function(b){g&&d.cancel(g);h=b;g=d(function(){a.filtro.prodotto.c=h},250)});a.eraseInput=function(b){27==b.keyCode&&(a.input="")};a.updateCheck=function(){return!a.vm.nuovoProdotto.c||!a.vm.nuovoProdotto.n||!a.vm.nuovoProdotto.m||!a.vm.nuovoProdotto.l||!a.vm.nuovoProdotto.x||!a.vm.nuovoProdotto.t||!a.vm.nuovoProdotto.r};var b=function(){return f.filter(a.vm.nuovoProdotto.z,function(a){return isNaN(a.z)||
!a.z||!a.a}).length};a.newProdotto=function(){c.saving=!1;a.errore.prodotto=!1;a.vm.nuovoProdotto={i:a.vm.nuovoProdotto.i+1,m:!1,l:!1,t:!1,a:"",y:1,f:0,z:[{z:"",a:""}]}};a.action=function(l){"N"==l&&(f.findWhere(a.vm.prodotti,{c:a.vm.nuovoProdotto.c,l:a.vm.nuovoProdotto.l})||0!==b()?a.errore.prodotto=!0:(c.saving=!0,e.post("php/prodotti.php?type=new",{id:a.vm.nuovoProdotto.i,mark:a.vm.nuovoProdotto.m,line:a.vm.nuovoProdotto.l,cod:a.vm.nuovoProdotto.c,title:a.vm.nuovoProdotto.n,tbpr:a.vm.nuovoProdotto.t,
dim:a.vm.nuovoProdotto.d,pos:a.vm.nuovoProdotto.y,lnfn:a.vm.nuovoProdotto.x,note:a.vm.nuovoProdotto.o,abb:a.vm.nuovoProdotto.a,fin:a.vm.nuovoProdotto.f,prices:a.vm.nuovoProdotto.z,image:a.vm.nuovoProdotto.r}).success(function(b){console.log("Risposta dalla pagina PHP",b);delete a.vm.nuovoProdotto.r;a.vm.prodotti.push(a.vm.nuovoProdotto);a.vm.saveProdottoData();a.newProdotto()}).error(function(a,b){console.log(b)})))}}]);
angular.module("mpuDashboard").controller("prodottiSettoriCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout",function(a,c,f,k,e,d){a.prodottoSettore={selected:!1};a.vm.sorting="n";a.$watch("vm.nuovoProdottoSettore.m",function(){a.vm.nuovoProdottoSettore.l=!1;a.vm.nuovoProdottoSettore.w=!1;a.vm.nuovoProdottoSettore.c=!1});a.$watch("vm.nuovoProdottoSettore.l",function(b){a.vm.nuovoProdottoSettore.c=!1});a.$watch("vm.nuovoProdottoSettore.w",function(b){a.settoriAvailable=f.where(a.vm.lineeSettori,
{l:b});f.each(a.settoriAvailable,function(b){b.n=f.findWhere(a.vm.settori,{i:b.h}).n});a.prodottiAvailable=[{c:" Tutti",i:-1}];var c=f.where(a.vm.prodotti,{l:a.vm.nuovoProdottoSettore.l});f.each(c,function(c){f.find(a.vm.prodottiSettori,function(a){return a.c===c.i&&b===c.l})||a.prodottiAvailable.push(c)})});a.$watch("vm.nuovoProdottoSettore.c",function(b){if(b&&-1!=b){var c=f.find(a.vm.prodotti,function(a){return a.i==b});a.vm.nuovoProdottoSettore.n=c.c}});a.toggleSet=function(b){-1==a.vm.nuovoProdottoSettore.h.indexOf(b)?
a.vm.nuovoProdottoSettore.h.push(parseInt(b)):a.vm.nuovoProdottoSettore.h.splice(a.vm.nuovoProdottoSettore.h.indexOf(b),1)};a.selectProdottoSettore=function(b){a.prodottoSettore={};a.prodottoSettore.selected=!0;a.prodottoSettore.prodottoSettore=b};a.vm.saveProdottoSettoreData=function(){c.saving=!0;e.post("php/prodottiSettori.php?type=save",a.vm.prodottiSettori).success(function(){c.saving=!1}).error(function(a,c){console.log(c)})};a.saveDataDB=function(){c.saving=!0;e.post("php/prodottiSettori.php?type=db").success(function(){c.saving=
!1;k.prodottiSettori().then(function(b){a.vm.prodottiSettori=b.data})}).error(function(a,c){console.log(c)})};var h="",g;a.$watch("input",function(b){g&&d.cancel(g);h=b;g=d(function(){a.filtro.prodottoSettore.n=h},250)});a.eraseInput=function(b){27==b.keyCode&&(a.input="")};a.newProdottoSettore=function(b){c.saving=!1;a.errore.prodottoSettore=!1;a.vm.nuovoProdottoSettore={m:!1,l:!1,c:!1,h:[]};a.vm.nuovoProdottoSettore.i=b?parseInt(b)+1:a.vm.nuovoProdottoSettore.i+1;console.log(a.vm.nuovoProdottoSettore.i)};
a.updateCheck=function(){return!a.vm.nuovoProdottoSettore.m||!a.vm.nuovoProdottoSettore.l||!a.vm.nuovoProdottoSettore.w||!a.vm.nuovoProdottoSettore.c};a.action=function(b){"N"==b&&(0!=a.vm.nuovoProdottoSettore.h.length?(c.saving=!0,e.post("php/prodottiSettori.php?type=new",{id:a.vm.nuovoProdottoSettore.i,mark:a.vm.nuovoProdottoSettore.m,line:a.vm.nuovoProdottoSettore.l,nwln:a.vm.nuovoProdottoSettore.w,array:a.vm.nuovoProdottoSettore.h,cod:a.vm.nuovoProdottoSettore.c}).success(function(b){console.log("Risposta dalla pagina PHP",
b);-1!=a.vm.nuovoProdottoSettore.c?(a.vm.prodottiSettori.push(a.vm.nuovoProdottoSettore),a.vm.saveProdottoSettoreData()):a.saveDataDB();a.newProdottoSettore(b)}).error(function(a,b){console.log(b)})):a.errore.prodottoSettore=!0)}}]);
angular.module("mpuDashboard").controller("vetrineCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout",function(a,c,f,k,e,d){a.vetrina={selected:!1};a.generateSettoriInLinea=function(b){if(b){var c=[],d=f.find(a.vm.linee,function(a){return a.i===b}).q;f.each(d,function(b){var l=f.find(a.vm.settori,function(a){return a.i===b}).n;c.push({i:b,n:l})});return c}};a.settoriInLinea=!1;a.selectVetrina=function(b){a.vetrina={};a.vetrina.selected=!0;a.vetrina.vetrina=b};a.vm.sorting="c";a.toggleSet=
function(b){-1==a.vm.nuovaVetrina.s.indexOf(b)?a.vm.nuovaVetrina.s.push(parseInt(b)):a.vm.nuovaVetrina.s.splice(a.vm.nuovaVetrina.s.indexOf(b),1)};a.$watch("vm.nuovaVetrina.m",function(){a.vm.nuovaVetrina.l=!1;a.vm.nuovaVetrina.h=[]});a.$watch("vm.nuovaVetrina.l",function(b,c){a.vm.nuovaVetrina.h=[];a.settoriInLinea=a.generateSettoriInLinea(b)});a.vm.saveVetrinaData=function(){c.saving=!0;e.post("php/vetrine.php?type=save",a.vm.vetrine).success(function(){c.saving=!1}).error(function(a,c){console.log(c)})};
a.saveDataDB=function(){c.saving=!0;e.post("php/vetrine.php?type=db").success(function(){c.saving=!1;k.vetrine().then(function(b){a.vm.vetrine=b.data})}).error(function(a,c){console.log(c)})};var h="",g;a.$watch("input",function(b){g&&d.cancel(g);h=b;g=d(function(){a.filtro.vetrina.c=h},250)});a.eraseInput=function(b){27==b.keyCode&&(a.input="")};a.updateCheck=function(){return!a.vm.nuovaVetrina.c||!a.vm.nuovaVetrina.n||!a.vm.nuovaVetrina.m||!a.vm.nuovaVetrina.l||!a.vm.nuovaVetrina.r||!a.vm.nuovaVetrina.s||
isNaN(a.vm.nuovaVetrina.y)};a.newVetrina=function(){c.saving=!1;a.errore.vetrina=!1;a.vm.nuovaVetrina={i:a.vm.nuovaVetrina.i+1,m:!1,l:!1,s:!1,y:1,v:1}};a.action=function(b){"N"==b&&(f.findWhere(a.vm.vetrine,{c:a.vm.nuovaVetrina.c,l:a.vm.nuovaVetrina.l})?a.errore.vetrina=!0:(c.saving=!0,e.post("php/vetrine.php?type=new",{id:a.vm.nuovaVetrina.i,mark:a.vm.nuovaVetrina.m,line:a.vm.nuovaVetrina.l,cod:a.vm.nuovaVetrina.c,title:a.vm.nuovaVetrina.n,pos:a.vm.nuovaVetrina.y,show:a.vm.nuovaVetrina.v,note:a.vm.nuovaVetrina.o,
settore:a.vm.nuovaVetrina.s,image:a.vm.nuovaVetrina.r}).success(function(b){console.log("Risposta dalla pagina PHP",b);delete a.vm.nuovaVetrina.r;a.vm.vetrine.push(a.vm.nuovaVetrina);a.vm.saveVetrinaData();a.newVetrina()}).error(function(a,b){console.log(b)})))}}]);
angular.module("mpuDashboard").controller("vetrineProdottiCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout",function(a,c,f,k,e,d){a.vetrinaProdotto={selected:!1};a.vm.sorting=["y","j","c"];a.$watch("vm.nuovoVetrinaProdotto.k",function(b){a.vm.nuovoVetrinaProdotto.m=b;a.vm.nuovoVetrinaProdotto.j=!1});a.$watch("vm.nuovoVetrinaProdotto.j",function(b){a.vm.nuovoVetrinaProdotto.l=b;a.vm.nuovoVetrinaProdotto.c=!1});a.$watch("vm.nuovoVetrinaProdotto.m",function(){a.vm.nuovoVetrinaProdotto.l=
!1});a.$watch("vm.nuovoVetrinaProdotto.l",function(){a.vm.nuovoVetrinaProdotto.p=!1});a.$watch("vm.nuovoVetrinaProdotto.p",function(b){if(b){b=f.findWhere(a.vm.prodotti,{i:b});b=f.pluck(b.z,"a");a.tabsAvailable=[];for(var c=0;c<b.length;c++){var d=f.findWhere(a.vm.finitureTabelle,{i:b[c]});a.tabsAvailable.push({i:b[c],n:d.n})}return a.tabsAvailable}a.vm.nuovoVetrinaProdotto.u=!1});a.$watch("vm.nuovoVetrinaProdotto.u",function(b){if(b)return a.finsAvailable=f.where(a.vm.abbinamenti,{u:b}),a.finsAvailable;
a.vm.nuovoVetrinaProdotto.f=!1});a.selectVetrinaProdotto=function(b){a.vetrinaProdotto={};a.vetrinaProdotto.selected=!0;a.vetrinaProdotto.vetrinaProdotto=b};a.vm.saveVetrineProdottiData=function(){c.saving=!0;e.post("php/vetrineProdotti.php?type=save",a.vm.vetrineProdotti).success(function(){c.saving=!1}).error(function(a,c){console.log(c)})};a.saveDataDB=function(){c.saving=!0;e.post("php/vetrineProdotti.php?type=db").success(function(){c.saving=!1;k.vetrineProdotti().then(function(b){a.vm.vetrineProdotti=
b.data})}).error(function(a,c){console.log(c)})};var h="",g;a.$watch("input",function(b){g&&d.cancel(g);h=b;g=d(function(){if(h||""!=h){var b=[];f.each(a.vm.vetrine,function(a){a.c==h&&b.push(a.i)});a.filtro.vetrinaProdotto.c=b}else a.filtro.vetrinaProdotto.c=!1},250)});a.$watch("inputCod",function(b){g&&d.cancel(g);h=b;g=d(function(){h&&(h=h.toUpperCase());if(""!=h){var b=f.findWhere(a.vm.prodotti,{c:h});b&&(a.filtro.vetrinaProdotto.p=b.i)}else a.filtro.vetrinaProdotto.p=!1},250)});a.eraseInput=
function(b,c){27==b.keyCode&&(c?a.inputCod="":a.input="")};a.newVetrinaProdotto=function(){c.saving=!1;a.errore.vetrinaProdotto=!1;a.vm.nuovoVetrinaProdotto={i:a.vm.nuovoVetrinaProdotto.i+1,c:!1,p:!1,m:!1,k:!1,l:!1,j:!1,u:!1,f:!1,y:1,q:1}};a.updateCheck=function(){return!a.vm.nuovoVetrinaProdotto.c||!a.vm.nuovoVetrinaProdotto.p||!a.vm.nuovoVetrinaProdotto.l||!a.vm.nuovoVetrinaProdotto.j||!a.vm.nuovoVetrinaProdotto.u||!a.vm.nuovoVetrinaProdotto.f||isNaN(a.vm.nuovoVetrinaProdotto.y)||isNaN(a.vm.nuovoVetrinaProdotto.q)};
a.action=function(b){"N"==b&&(c.saving=!0,e.post("php/vetrineProdotti.php?type=new",{id:a.vm.nuovoVetrinaProdotto.i,comp:a.vm.nuovoVetrinaProdotto.c,prd:a.vm.nuovoVetrinaProdotto.p,pline:a.vm.nuovoVetrinaProdotto.l,cline:a.vm.nuovoVetrinaProdotto.j,pmark:a.vm.nuovoVetrinaProdotto.m,cmark:a.vm.nuovoVetrinaProdotto.k,fin:a.vm.nuovoVetrinaProdotto.f,tab:a.vm.nuovoVetrinaProdotto.u,pos:a.vm.nuovoVetrinaProdotto.y,qnt:a.vm.nuovoVetrinaProdotto.q}).success(function(b){a.vm.vetrineProdotti.push(a.vm.nuovoVetrinaProdotto);
a.vm.saveVetrineProdottiData();a.newVetrinaProdotto()}).error(function(a,b){console.log(b)}))}}]);
angular.module("mpuDashboard").controller("nazioniCtrl",["$scope","$rootScope","_","dataSvc","$http",function(a,c,f,k,e){a.vm.saveNazioniData=function(){c.saving=!0;e.post("php/nazioni.php?type=save",a.vm.nazioni).success(function(){c.saving=!1}).error(function(a,c){console.log(c)})};a.saveDataDB=function(){c.saving=!0;e.post("php/nazioni.php?type=db",a.vm.nazioni).success(function(){c.saving=!1;k.nazioni().then(function(c){a.vm.nazioni=c.data})}).error(function(a,c){console.log(c)})};a.updateCheck=
function(){return!a.vm.nuovaNazione.n||!a.vm.nuovaNazione.x};a.action=function(d){"N"==d&&(c.saving=!0,e.post("php/nazioni.php?type=new",{id:a.vm.nuovaNazione.i,nome:a.vm.nuovaNazione.n,show:a.vm.nuovaNazione.v,prx:a.vm.nuovaNazione.x}).success(function(d){a.vm.nazioni.push(a.vm.nuovaNazione);a.vm.nuovaNazione={v:1,i:a.vm.nuovaNazione.i+1};a.vm.saveNazioniData();c.saving=!1}).error(function(a,c){console.log(c)}))}}]);
angular.module("mpuDashboard").controller("regioniCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout",function(a,c,f,k,e,d){a.vm.sorting="n";a.regione={selected:!1};a.selectRegione=function(b){a.regione={};a.regione.selected=!0;a.regione.regione=b};a.vm.saveRegioniData=function(){c.saving=!0;e.post("php/regioni.php?type=save",a.vm.regioni).success(function(){c.saving=!1}).error(function(a,c){console.log(c)})};a.saveDataDB=function(){c.saving=!0;e.post("php/regioni.php?type=db",a.vm.regioni).success(function(){c.saving=
!1;k.regioni().then(function(b){a.vm.regioni=b.data})}).error(function(a,c){console.log(c)})};a.updateCheck=function(){return!a.vm.nuovaRegione.n||!a.vm.nuovaRegione.z};a.newItem=function(){c.saving=!1;a.regione.selected=!1;a.errore.regione=!1;a.vm.nuovaRegione={i:a.vm.nuovaRegione.i+1,z:!1}};var h="",g;a.$watch("input",function(b){g&&d.cancel(g);h=b;g=d(function(){a.filtro.regione.n=h},250)});a.eraseInput=function(b){27==b.keyCode&&(a.input="")};a.action=function(b){"N"==b&&(f.findWhere(a.vm.regioni,
{n:a.vm.nuovaRegione.n,z:a.vm.nuovaRegione.z})?a.errore.regione=!0:(c.saving=!0,e.post("php/regioni.php?type=new",{id:a.vm.nuovaRegione.i,nome:a.vm.nuovaRegione.n,nazione:a.vm.nuovaRegione.z}).success(function(b){a.vm.regioni.push(a.vm.nuovaRegione);a.newItem();a.vm.saveRegioniData()}).error(function(a,b){console.log(b)})))}}]);
angular.module("mpuDashboard").controller("provinceCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout","priceManager",function(a,c,f,k,e,d,h){a.vm.sorting=["z","r","n"];a.provincia={selected:!1};a.vm.priceManager=h;a.$watch("filtro.nazione.i",function(b){a.filtro.regione.i=!1});a.selectItem=function(b){a.provincia={};a.provincia.selected=!0;a.provincia.provincia=b};a.vm.saveProvinceData=function(){c.saving=!0;e.post("php/province.php?type=save",a.vm.province).success(function(){c.saving=
!1}).error(function(a,b){console.log(b)})};a.saveDataDB=function(){c.saving=!0;e.post("php/province.php?type=db",a.vm.province).success(function(){c.saving=!1;k.province().then(function(b){a.vm.province=b.data})}).error(function(a,b){console.log(b)})};a.updateCheck=function(){return!a.vm.nuovaProvincia.n||!a.vm.nuovaProvincia.z};a.newItem=function(){c.saving=!1;a.provincia.selected=!1;a.errore.provincia=!1;a.vm.nuovaProvincia={i:a.vm.nuovaProvincia.i+1,z:!1,r:!1,b:0,l:0,t:0,j:1,m:0,k:1}};var g="",
b;a.$watch("input",function(c){b&&d.cancel(b);g=c;b=d(function(){a.filtro.provincia.n=g},250)});a.eraseInput=function(b){27==b.keyCode&&(a.input="")};a.action=function(b){"N"==b&&(f.findWhere(a.vm.province,{n:a.vm.nuovaProvincia.n,c:a.vm.nuovaProvincia.c,z:a.vm.nuovaProvincia.z,r:a.vm.nuovaProvincia.r})?a.errore.provincia=!0:(c.saving=!0,e.post("php/province.php?type=new",{id:a.vm.nuovaProvincia.i,nome:a.vm.nuovaProvincia.n,sigla:a.vm.nuovaProvincia.c,nazione:a.vm.nuovaProvincia.z,regione:a.vm.nuovaProvincia.r,
trasporto:a.vm.nuovaProvincia.t,trasporto_type:a.vm.nuovaProvincia.j,montaggio:a.vm.nuovaProvincia.m,montaggio_type:a.vm.nuovaProvincia.k,limite:a.vm.nuovaProvincia.l,minimo:a.vm.nuovaProvincia.b}).success(function(b){console.log("Risposta dalla pagina PHP",b);a.vm.province.push(a.vm.nuovaProvincia);a.newItem();a.vm.saveProvinceData()}).error(function(a,b){console.log(b)})))}}]);
angular.module("mpuDashboard").controller("convenzioniCtrl",["$scope","$rootScope","_","dataSvc","$http",function(a,c,f,k,e){a.vm.saveConvenzioniData=function(){c.saving=!0;e.post("php/convenzioni.php?type=save",a.vm.convenzioni).success(function(){c.saving=!1}).error(function(a,c){console.log(c)})};a.saveDataDB=function(){c.saving=!0;e.post("php/convenzioni.php?type=db",a.vm.convenzioni).success(function(){c.saving=!1;k.convenzioni().then(function(c){a.vm.convenzioni=c.data})}).error(function(a,
c){console.log(c)})};a.updateCheck=function(){return!a.vm.nuovaConvenzione.n};a.action=function(d){"N"==d&&(c.saving=!0,e.post("php/convenzioni.php?type=new",{id:a.vm.nuovaConvenzione.i,nome:a.vm.nuovaConvenzione.n,email:a.vm.nuovaConvenzione.e}).success(function(d){a.vm.convenzioni.push(a.vm.nuovaConvenzione);a.vm.nuovaConvenzione={i:a.vm.nuovaConvenzione.i+1};a.vm.saveConvenzioniData();c.saving=!1}).error(function(a,c){console.log(c)}))}}]);
angular.module("mpuDashboard").controller("agentiCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout",function(a,c,f,k,e,d){a.vm.sorting="n";a.agente={selected:!1};a.selectItem=function(b){a.agente={};a.agente.selected=!0;a.agente.agente=b};a.vm.saveAgentiData=function(){c.saving=!0;e.post("php/agenti.php?type=save",a.vm.agenti).success(function(){c.saving=!1}).error(function(a,c){console.log(c)})};a.saveDataDB=function(){c.saving=!0;e.post("php/agenti.php?type=db",a.vm.agenti).success(function(){c.saving=
!1;k.agenti().then(function(b){a.vm.agenti=b.data})}).error(function(a,c){console.log(c)})};var h="",g;a.$watch("input",function(b){g&&d.cancel(g);h=b;g=d(function(){a.filtro.agente.n=h},250)});a.eraseInput=function(b){27==b.keyCode&&(a.input="")};a.updateCheck=function(){return!a.vm.nuovoAgente.n||!a.vm.nuovoAgente.e||!a.vm.nuovoAgente.p||!a.vm.nuovoAgente.r||!a.vm.nuovoAgente.t};a.newItem=function(){c.saving=!1;a.vm.nuovoAgente={i:a.vm.nuovoAgente.i+1,r:!1}};a.action=function(b){"N"==b&&(c.saving=
!0,e.post("php/agenti.php?type=new",{id:a.vm.nuovoAgente.i,nome:a.vm.nuovoAgente.n,email:a.vm.nuovoAgente.e,password:a.vm.nuovoAgente.p,tel:a.vm.nuovoAgente.t,riv:a.vm.nuovoAgente.r}).success(function(b){a.vm.agenti.push(a.vm.nuovoAgente);a.vm.saveAgentiData();a.newItem();c.saving=!1}).error(function(a,b){console.log(b)}))}}]);
angular.module("mpuDashboard").controller("rivenditoriCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout","priceManager",function(a,c,f,k,e,d,h){a.rivenditore={selected:!1};a.vm.priceManager=h;a.vm.sorting=["n"];a.switchType=function(){return 0==a.vm.nuovoRivenditore.p?"rivenditore":"rivestimento"};a.selectItem=function(b){a.rivenditore={};a.rivenditore.selected=!0;a.rivenditore.rivenditore=b};a.vm.saveRivenditoreData=function(){c.saving=!0;e.post("php/rivenditori.php?type=save",a.vm.rivenditori).success(function(){c.saving=
!1}).error(function(a,b){console.log(b)})};a.saveDataDB=function(){c.saving=!0;e.post("php/rivenditori.php?type=db").success(function(){c.saving=!1;k.rivenditori().then(function(b){a.vm.rivenditori=b.data})}).error(function(a,b){console.log(b)})};a.openMarchi=function(){a.vm.mv=!a.vm.mv};var g=function(){a.vm.mv=!1;a.vm.nuovoRivenditore.y=angular.copy(a.vm.marchi);f.each(a.vm.nuovoRivenditore.y,function(a){a.s=0;a.d=0;delete a.n;delete a.b;delete a.g});return a.vm.nuovoRivenditore.y};g();var b="",
l;a.$watch("input",function(c){l&&d.cancel(l);b=c;l=d(function(){a.filtro.rivenditore.n=b},250)});a.eraseInput=function(b){27==b.keyCode&&(a.input="")};a.$watch("vm.nuovoRivenditore.v",function(b){b&&(a.vm.nuovoRivenditore.z=!1,a.vm.nuovoRivenditore.r=!1,a.vm.nuovoRivenditore.p=!1)});a.updateCheck=function(){return(!a.vm.nuovoRivenditore.z||!a.vm.nuovoRivenditore.r||!a.vm.nuovoRivenditore.p)&&!a.vm.nuovoRivenditore.v||!a.vm.nuovoRivenditore.n||!a.vm.nuovoRivenditore.x||!a.vm.nuovoRivenditore.s||!a.vm.nuovoRivenditore.h&&
!a.vm.nuovoRivenditore.c||!a.vm.nuovoRivenditore.e||!a.vm.nuovoRivenditore.w||!a.vm.nuovoRivenditore.g};a.newItem=function(){c.saving=!1;a.errore.rivenditore=!1;a.vm.nuovoRivenditore={i:a.vm.nuovoRivenditore.i+1,z:!1,r:!1,p:!1,b:0,l:0,t:0,j:1,m:0,k:1,v:!1,c:"",h:"",f:"",a:""};g()};var m=[];a.showInfoFnc=function(a,b){"add"==b?m.push(a):(a=m.indexOf(a),m.splice(a,1))};a.checkShowInfo=function(a){return m.indexOf(a)};a.action=function(b){"N"==b&&(b=a.vm.nuovoRivenditore.p?f.findWhere(a.vm.rivenditori,
{p:a.vm.nuovoRivenditore.p}):!1,b?a.errore.rivenditore=!0:(c.saving=!0,e.post("php/rivenditori.php?type=new",{id:a.vm.nuovoRivenditore.i,nome:a.vm.nuovoRivenditore.n,naz:a.vm.nuovoRivenditore.z,reg:a.vm.nuovoRivenditore.r,prov:a.vm.nuovoRivenditore.p,conv:a.vm.nuovoRivenditore.v,rif:a.vm.nuovoRivenditore.x,sede:a.vm.nuovoRivenditore.s,tel:a.vm.nuovoRivenditore.h,fax:a.vm.nuovoRivenditore.f,cell:a.vm.nuovoRivenditore.c,web:a.vm.nuovoRivenditore.q,email:a.vm.nuovoRivenditore.e,psw:a.vm.nuovoRivenditore.w,
limite:a.vm.nuovoRivenditore.l,minimo:a.vm.nuovoRivenditore.b,trasporto:a.vm.nuovoRivenditore.t,trasporto_type:a.vm.nuovoRivenditore.j,montaggio:a.vm.nuovoRivenditore.m,montaggio_type:a.vm.nuovoRivenditore.k,mark:a.vm.nuovoRivenditore.y,notes:a.vm.nuovoRivenditore.a,image:a.vm.nuovoRivenditore.g}).success(function(b){console.log("Risposta dalla pagina PHP",b);delete a.vm.nuovoRivenditore.g;a.vm.rivenditori.push(a.vm.nuovoRivenditore);a.vm.saveRivenditoreData();a.newItem()}).error(function(a,b){console.log(b)})))}}]);
angular.module("mpuDashboard").controller("esposizioniCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout",function(a,c,f,k,e,d){a.esposizione={selected:!1};a.selectItem=function(b){a.esposizione={};a.esposizione.selected=!0;a.esposizione.esposizione=b};a.vm.sorting=["l","c","f"];a.$watch("vm.nuovaEsposizione.l",function(b){a.settoriAvailable=f.where(a.vm.lineeSettori,{l:b});f.each(a.settoriAvailable,function(b){b.n=f.findWhere(a.vm.settori,{i:b.h}).n})});a.$watch("vm.nuovaEsposizione.m",
function(){a.vm.nuovaEsposizione.l=!1;a.vm.nuovaEsposizione.t=!1});a.$watch("vm.nuovaEsposizione.l",function(){a.vm.nuovaEsposizione.t=!1});a.vm.saveEsposizioneData=function(){c.saving=!0;e.post("php/esposizioni.php?type=save",a.vm.esposizioni).success(function(){c.saving=!1}).error(function(a,c){console.log(c)})};a.saveDataDB=function(){c.saving=!0;e.post("php/esposizioni.php?type=db").success(function(){c.saving=!1;k.esposizioni().then(function(b){a.vm.esposizioni=b.data})}).error(function(a,c){console.log(c)})};
a.saveDataDB();var h="",g;a.$watch("input",function(b){g&&d.cancel(g);h=b;g=d(function(){a.filtro.esposizione.c=h},250)});a.eraseInput=function(b){27==b.keyCode&&(a.input="")};a.updateCheck=function(){return!a.vm.nuovaEsposizione.c||!a.vm.nuovaEsposizione.f||!a.vm.nuovaEsposizione.m||!a.vm.nuovaEsposizione.l||!a.vm.nuovaEsposizione.t||!a.vm.nuovaEsposizione.r||isNaN(a.vm.nuovaEsposizione.y)};a.newItem=function(){c.saving=!1;a.errore.esposizione=!1;a.vm.nuovaEsposizione={i:a.vm.nuovaEsposizione.i+
1,m:!1,l:!1,t:!1,y:1}};a.action=function(b){"N"==b&&(f.findWhere(a.vm.esposizioni,{c:a.vm.nuovaEsposizione.c,f:a.vm.nuovaEsposizione.f,l:a.vm.nuovaEsposizione.l})?a.errore.esposizione=!0:(c.saving=!0,e.post("php/esposizioni.php?type=new",{id:a.vm.nuovaEsposizione.i,mark:a.vm.nuovaEsposizione.m,line:a.vm.nuovaEsposizione.l,tbpr:a.vm.nuovaEsposizione.t,cod:a.vm.nuovaEsposizione.c,fin:a.vm.nuovaEsposizione.f,dim:a.vm.nuovaEsposizione.d,pos:a.vm.nuovaEsposizione.y,nome:a.vm.nuovaEsposizione.n,image:a.vm.nuovaEsposizione.r}).success(function(b){delete a.vm.nuovaEsposizione.r;
a.vm.esposizioni.push(a.vm.nuovaEsposizione);a.vm.saveEsposizioneData();a.newItem()}).error(function(a,b){console.log(b)})))}}]);
angular.module("mpuDashboard").controller("compostiCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout",function(a,c,f,k,e,d){a.composto={selected:!1};a.selectItem=function(b){a.composto={};a.composto.selected=!0;a.composto.composto=b};a.vm.sorting=["l","c","f"];a.$watch("vm.nuovoComposto.m",function(){a.vm.nuovoComposto.l=!1});a.vm.saveCompostoData=function(){c.saving=!0;e.post("php/composti.php?type=save",a.vm.composti).success(function(){c.saving=!1}).error(function(a,c){console.log(c)})};
a.saveDataDB=function(){c.saving=!0;e.post("php/composti.php?type=db").success(function(){c.saving=!1;k.composti().then(function(b){a.vm.composti=b.data})}).error(function(a,c){console.log(c)})};a.saveDataDB();var h="",g;a.$watch("input",function(b){g&&d.cancel(g);h=b;g=d(function(){a.filtro.composto.c=h},250)});a.eraseInput=function(b){27==b.keyCode&&(a.input="")};a.updateCheck=function(){return!a.vm.nuovoComposto.c||!a.vm.nuovoComposto.f||!a.vm.nuovoComposto.m||!a.vm.nuovoComposto.l||!a.vm.nuovoComposto.n||
!a.vm.nuovoComposto.r||isNaN(a.vm.nuovoComposto.y)};a.newItem=function(){c.saving=!1;a.errore.composto=!1;a.vm.nuovoComposto={i:a.vm.nuovoComposto.i+1,m:!1,l:!1,y:1}};a.action=function(b){"N"==b&&(f.findWhere(a.vm.composti,{c:a.vm.nuovoComposto.c,f:a.vm.nuovoComposto.f,l:a.vm.nuovoComposto.l})?a.errore.composto=!0:(c.saving=!0,e.post("php/composti.php?type=new",{id:a.vm.nuovoComposto.i,mark:a.vm.nuovoComposto.m,line:a.vm.nuovoComposto.l,cod:a.vm.nuovoComposto.c,fin:a.vm.nuovoComposto.f,pos:a.vm.nuovoComposto.y,
nome:a.vm.nuovoComposto.n,image:a.vm.nuovoComposto.r}).success(function(b){console.log("Risposta dalla pagina PHP",b);delete a.vm.nuovoComposto.r;a.vm.composti.push(a.vm.nuovoComposto);a.vm.saveCompostoData();a.newItem()}).error(function(a,b){console.log(b)})))}}]);
angular.module("mpuDashboard").controller("esposizioniProdottiCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout",function(a,c,f,k,e,d){a.esposizioneProdotto={selected:!1};a.vm.sorting=["j","e","c"];a.$watch("vm.nuovoEsposizioneProdotto.k",function(b){a.vm.nuovoEsposizioneProdotto.m=b;a.vm.nuovoEsposizioneProdotto.j=!1});a.$watch("vm.nuovoEsposizioneProdotto.j",function(b){a.vm.nuovoEsposizioneProdotto.l=b;a.vm.nuovoEsposizioneProdotto.c=!1});a.$watch("vm.nuovoEsposizioneProdotto.m",function(){a.vm.nuovoEsposizioneProdotto.l=
!1});a.$watch("vm.nuovoEsposizioneProdotto.l",function(){a.vm.nuovoEsposizioneProdotto.p=!1});a.$watch("vm.nuovoEsposizioneProdotto.p",function(b){if(b){b=f.findWhere(a.vm.prodotti,{i:b});b=f.pluck(b.z,"a");a.tabsAvailable=[];for(var c=0;c<b.length;c++){var d=f.findWhere(a.vm.finitureTabelle,{i:b[c]});a.tabsAvailable.push({i:b[c],n:d.n})}return a.tabsAvailable}a.vm.nuovoEsposizioneProdotto.u=!1});a.$watch("vm.nuovoEsposizioneProdotto.u",function(b){if(b)return a.finsAvailable=f.where(a.vm.abbinamenti,
{u:b}),a.finsAvailable;a.vm.nuovoEsposizioneProdotto.f=!1});a.selectItem=function(b){a.esposizioneProdotto={};a.esposizioneProdotto.selected=!0;a.esposizioneProdotto.esposizioneProdotto=b};a.vm.saveEsposizioniProdottiData=function(){c.saving=!0;e.post("php/esposizioniSettori.php?type=save",a.vm.esposizioniSettori).success(function(){c.saving=!1}).error(function(a,c){console.log(c)})};a.saveDataDB=function(){c.saving=!0;e.post("php/esposizioniSettori.php?type=db").success(function(){c.saving=!1;k.esposizioniSettori().then(function(b){a.vm.esposizioniSettori=
b.data})}).error(function(a,c){console.log(c)})};a.saveDataDB();var h="",g;a.$watch("input",function(b){g&&d.cancel(g);h=b;g=d(function(){if(h||""!=h){var b=[];f.each(a.vm.esposizioni,function(a){a.c==h&&b.push(a.i)});a.filtro.esposizioneProdotto.c=b}else a.filtro.esposizioneProdotto.c=!1},250)});a.$watch("inputCod",function(b){g&&d.cancel(g);h=b;g=d(function(){h&&(h=h.toUpperCase());if(""!=h){var b=f.findWhere(a.vm.prodotti,{c:h});b&&(a.filtro.esposizioneProdotto.p=b.i)}else a.filtro.esposizioneProdotto.p=
!1},250)});a.eraseInput=function(b,c){27==b.keyCode&&(c?a.inputCod="":a.input="")};a.newItem=function(){c.saving=!1;a.errore.esposizioneProdotto=!1;a.vm.nuovoEsposizioneProdotto={i:a.vm.nuovoEsposizioneProdotto.i+1,c:!1,p:!1,m:!1,k:!1,l:!1,j:!1,u:!1,f:!1,y:1,q:1}};a.updateCheck=function(){return!a.vm.nuovoEsposizioneProdotto.c||!a.vm.nuovoEsposizioneProdotto.p||!a.vm.nuovoEsposizioneProdotto.l||!a.vm.nuovoEsposizioneProdotto.j||!a.vm.nuovoEsposizioneProdotto.u||!a.vm.nuovoEsposizioneProdotto.f||isNaN(a.vm.nuovoEsposizioneProdotto.y)||
isNaN(a.vm.nuovoEsposizioneProdotto.q)};a.action=function(b){"N"==b&&(c.saving=!0,e.post("php/esposizioniSettori.php?type=new",{id:a.vm.nuovoEsposizioneProdotto.i,comp:a.vm.nuovoEsposizioneProdotto.c,prd:a.vm.nuovoEsposizioneProdotto.p,pline:a.vm.nuovoEsposizioneProdotto.l,cline:a.vm.nuovoEsposizioneProdotto.j,pmark:a.vm.nuovoEsposizioneProdotto.m,cmark:a.vm.nuovoEsposizioneProdotto.k,fin:a.vm.nuovoEsposizioneProdotto.f,tab:a.vm.nuovoEsposizioneProdotto.u,pos:a.vm.nuovoEsposizioneProdotto.y,qnt:a.vm.nuovoEsposizioneProdotto.q}).success(function(b){console.log("Risposta dalla pagina PHP",
b);a.vm.esposizioniSettori.push(a.vm.nuovoEsposizioneProdotto);a.vm.saveEsposizioniProdottiData();a.newItem()}).error(function(a,b){console.log(b)}))}}]);
angular.module("mpuDashboard").controller("compostiProdottiCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout",function(a,c,f,k,e,d){a.compostoProdotto={selected:!1};a.vm.sorting=["j","e","c","y"];a.$watch("vm.nuovoCompostoProdotto.k",function(b){a.vm.nuovoCompostoProdotto.m=b;a.vm.nuovoCompostoProdotto.j=!1});a.$watch("vm.nuovoCompostoProdotto.j",function(b){a.vm.nuovoCompostoProdotto.l=b;a.vm.nuovoCompostoProdotto.c=!1});a.$watch("vm.nuovoCompostoProdotto.m",function(){a.vm.nuovoCompostoProdotto.l=
!1});a.$watch("vm.nuovoCompostoProdotto.l",function(){a.vm.nuovoCompostoProdotto.p=!1});a.$watch("vm.nuovoCompostoProdotto.p",function(b){if(b){b=f.findWhere(a.vm.prodotti,{i:b});b=f.pluck(b.z,"a");a.tabsAvailable=[];for(var c=0;c<b.length;c++){var d=f.findWhere(a.vm.finitureTabelle,{i:b[c]});a.tabsAvailable.push({i:b[c],n:d.n})}return a.tabsAvailable}a.vm.nuovoCompostoProdotto.u=!1});a.$watch("vm.nuovoCompostoProdotto.u",function(b){if(b)return a.finsAvailable=f.where(a.vm.abbinamenti,{u:b}),a.finsAvailable;
a.vm.nuovoCompostoProdotto.f=!1});a.selectItem=function(b){a.compostoProdotto={};a.compostoProdotto.selected=!0;a.compostoProdotto.compostoProdotto=b};a.vm.saveCompostoProdottiData=function(){c.saving=!0;e.post("php/compostiProdotti.php?type=save",a.vm.compostiProdotti).success(function(){c.saving=!1}).error(function(a,c){console.log(c)})};a.saveDataDB=function(){c.saving=!0;e.post("php/compostiProdotti.php?type=db").success(function(){c.saving=!1;k.compostiProdotti().then(function(b){a.vm.compostiProdotti=
b.data})}).error(function(a,c){console.log(c)})};a.saveDataDB();var h="",g;a.$watch("input",function(b){g&&d.cancel(g);h=b;g=d(function(){if(h||""!=h){var b=[];f.each(a.vm.composti,function(a){a.c==h&&b.push(a.i)});a.filtro.compostoProdotto.c=b}else a.filtro.compostoProdotto.c=!1},250)});a.$watch("inputCod",function(b){g&&d.cancel(g);h=b;g=d(function(){h&&(h=h.toUpperCase());if(""!=h){var b=f.findWhere(a.vm.prodotti,{c:h});b&&(a.filtro.compostoProdotto.p=b.i)}else a.filtro.compostoProdotto.p=!1},
250)});a.eraseInput=function(b,c){27==b.keyCode&&(c?a.inputCod="":a.input="")};a.newItem=function(){c.saving=!1;a.errore.compostoProdotto=!1;a.vm.nuovoCompostoProdotto={i:a.vm.nuovoCompostoProdotto.i+1,c:!1,p:!1,m:!1,k:!1,l:!1,j:!1,u:!1,f:!1,y:1,q:1}};a.updateCheck=function(){return!a.vm.nuovoCompostoProdotto.c||!a.vm.nuovoCompostoProdotto.p||!a.vm.nuovoCompostoProdotto.l||!a.vm.nuovoCompostoProdotto.j||!a.vm.nuovoCompostoProdotto.u||!a.vm.nuovoCompostoProdotto.f||isNaN(a.vm.nuovoCompostoProdotto.y)||
isNaN(a.vm.nuovoCompostoProdotto.q)};a.action=function(b){"N"==b&&(c.saving=!0,e.post("php/compostiProdotti.php?type=new",{id:a.vm.nuovoCompostoProdotto.i,comp:a.vm.nuovoCompostoProdotto.c,prd:a.vm.nuovoCompostoProdotto.p,pline:a.vm.nuovoCompostoProdotto.l,cline:a.vm.nuovoCompostoProdotto.j,pmark:a.vm.nuovoCompostoProdotto.m,cmark:a.vm.nuovoCompostoProdotto.k,fin:a.vm.nuovoCompostoProdotto.f,tab:a.vm.nuovoCompostoProdotto.u,pos:a.vm.nuovoCompostoProdotto.y,qnt:a.vm.nuovoCompostoProdotto.q}).success(function(b){console.log("Risposta dalla pagina PHP",
b);a.vm.compostiProdotti.push(a.vm.nuovoCompostoProdotto);a.vm.saveCompostoProdottiData();a.newItem()}).error(function(a,b){console.log(b)}))}}]);
angular.module("mpuDashboard").controller("esposizioniSettoriCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout",function(a,c,f,k,e,d){a.esposizioneSettore={selected:!1};a.vm.sorting="-i";a.$watch("vm.nuovoEsposizioneSettore.m",function(){a.vm.nuovoEsposizioneSettore.l=!1;a.vm.nuovoEsposizioneSettore.w=!1;a.vm.nuovoEsposizioneSettore.c=!1});a.$watch("vm.nuovoEsposizioneSettore.l",function(b){a.vm.nuovoEsposizioneSettore.c=!1});a.$watch("vm.nuovoEsposizioneSettore.w",function(b){a.settoriAvailable=
f.where(a.vm.lineeSettori,{l:b});f.each(a.settoriAvailable,function(b){b.n=f.findWhere(a.vm.settori,{i:b.h}).n});a.esposizioniAvailable=[{c:" Tutti",i:-1}];var c=f.where(a.vm.esposizioni,{l:a.vm.nuovoEsposizioneSettore.l});f.each(c,function(c){f.find(a.vm.esposizioniSettori,function(a){return a.c===c.i&&b===c.l})||a.esposizioniAvailable.push(c)})});a.$watch("vm.nuovoEsposizioneSettore.c",function(b){if(b&&-1!=b){var c=f.find(a.vm.prodotti,function(a){return a.i==b});a.vm.nuovoEsposizioneSettore.n=
c.c}});a.toggleSet=function(b){-1==a.vm.nuovoEsposizioneSettore.h.indexOf(b)?a.vm.nuovoEsposizioneSettore.h.push(parseInt(b)):a.vm.nuovoEsposizioneSettore.h.splice(a.vm.nuovoEsposizioneSettore.h.indexOf(b),1)};a.selectItem=function(b){a.esposizioneSettore={};a.esposizioneSettore.selected=!0;a.esposizioneSettore.esposizioneSettore=b};a.vm.saveEsposizioneSettoreData=function(){c.saving=!0;e.post("php/esposizioniSettori.php?type=save",a.vm.esposizioniSettori).success(function(){c.saving=!1}).error(function(a,
c){console.log(c)})};a.saveDataDB=function(){c.saving=!0;e.post("php/esposizioniSettori.php?type=db").success(function(){c.saving=!1;k.esposizioniSettori().then(function(b){a.vm.esposizioniSettori=b.data})}).error(function(a,c){console.log(c)})};a.saveDataDB();var h="",g;a.$watch("input",function(b){g&&d.cancel(g);h=b;g=d(function(){if(h||""!=h){var b=[];f.each(a.vm.esposizioni,function(a){a.c==h&&b.push(a.i)});a.filtro.esposizioneSettore.c=b}else a.filtro.esposizioneSettore.c=!1},250)});a.eraseInput=
function(b){27==b.keyCode&&(a.input="")};a.newItem=function(){c.saving=!1;a.errore.esposizioneSettore=!1;a.vm.nuovoEsposizioneSettore={i:a.vm.nuovoEsposizioneSettore.i+1,m:!1,l:!1,c:!1,v:0,h:[]}};a.updateCheck=function(){return!a.vm.nuovoEsposizioneSettore.m||!a.vm.nuovoEsposizioneSettore.l||!a.vm.nuovoEsposizioneSettore.w||!a.vm.nuovoEsposizioneSettore.c};a.action=function(b){"N"==b&&(0!=a.vm.nuovoEsposizioneSettore.h.length?(c.saving=!0,e.post("php/esposizioniSettori.php?type=new",{id:a.vm.nuovoEsposizioneSettore.i,
mark:a.vm.nuovoEsposizioneSettore.m,line:a.vm.nuovoEsposizioneSettore.l,nwln:a.vm.nuovoEsposizioneSettore.w,array:a.vm.nuovoEsposizioneSettore.h,cod:a.vm.nuovoEsposizioneSettore.c,view:a.vm.nuovoEsposizioneSettore.v}).success(function(b){console.log("Risposta dalla pagina PHP",b);-1!=a.vm.nuovoEsposizioneSettore.c?(a.vm.esposizioniSettori.push(a.vm.nuovoEsposizioneSettore),a.vm.saveEsposizioneSettoreData()):a.saveDataDB();a.newItem()}).error(function(a,b){console.log(b)})):a.errore.esposizioneSettore=
!0)}}]);
angular.module("mpuDashboard").controller("compostiSettoriCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout",function(a,c,f,k,e,d){a.compostoSettore={selected:!1};a.vm.sorting="-i";a.$watch("vm.nuovoCompostoSettore.m",function(){a.vm.nuovoCompostoSettore.l=!1;a.vm.nuovoCompostoSettore.w=!1;a.vm.nuovoCompostoSettore.c=!1});a.$watch("vm.nuovoCompostoSettore.l",function(b){a.vm.nuovoCompostoSettore.c=!1});a.$watch("vm.nuovoCompostoSettore.w",function(b){a.settoriAvailable=f.where(a.vm.lineeSettori,{l:b});
f.each(a.settoriAvailable,function(b){b.n=f.findWhere(a.vm.settori,{i:b.h}).n});a.compostoAvailable=[{c:" Tutti",i:-1}];var c=f.where(a.vm.composti,{l:a.vm.nuovoCompostoSettore.l});f.each(c,function(c){f.find(a.vm.compostiSettori,function(a){return a.c===c.i&&b===c.l})||a.compostoAvailable.push(c)})});a.$watch("vm.nuovoCompostoSettore.c",function(b){if(b&&-1!=b){var c=f.find(a.vm.prodotti,function(a){return a.i==b});a.vm.nuovoCompostoSettore.n=c.c}});a.toggleSet=function(b){-1==a.vm.nuovoCompostoSettore.h.indexOf(b)?
a.vm.nuovoCompostoSettore.h.push(parseInt(b)):a.vm.nuovoCompostoSettore.h.splice(a.vm.nuovoCompostoSettore.h.indexOf(b),1)};a.selectItem=function(b){a.compostoSettore={};a.compostoSettore.selected=!0;a.compostoSettore.compostoSettore=b};a.vm.saveCompostoSettoreData=function(){c.saving=!0;e.post("php/compostiSettori.php?type=save",a.vm.compostiSettori).success(function(){c.saving=!1}).error(function(a,c){console.log(c)})};a.saveDataDB=function(){c.saving=!0;e.post("php/compostiSettori.php?type=db").success(function(){c.saving=
!1;k.compostiSettori().then(function(b){a.vm.compostiSettori=b.data})}).error(function(a,c){console.log(c)})};a.saveDataDB();var h="",g;a.$watch("input",function(b){g&&d.cancel(g);h=b;g=d(function(){if(h||""!=h){var b=[];f.each(a.vm.composti,function(a){a.c==h&&b.push(a.i)});a.filtro.compostoSettore.c=b}else a.filtro.compostoSettore.c=!1},250)});a.eraseInput=function(b){27==b.keyCode&&(a.input="")};a.newItem=function(){c.saving=!1;a.errore.compostoSettore=!1;a.vm.nuovoCompostoSettore={i:a.vm.nuovoCompostoSettore.i+
1,m:!1,l:!1,c:!1,v:0,h:[]}};a.updateCheck=function(){return!a.vm.nuovoCompostoSettore.m||!a.vm.nuovoCompostoSettore.l||!a.vm.nuovoCompostoSettore.w||!a.vm.nuovoCompostoSettore.c};a.action=function(b){"N"==b&&(0!=a.vm.nuovoCompostoSettore.h.length?(c.saving=!0,e.post("php/compostiSettori.php?type=new",{id:a.vm.nuovoCompostoSettore.i,mark:a.vm.nuovoCompostoSettore.m,line:a.vm.nuovoCompostoSettore.l,nwln:a.vm.nuovoCompostoSettore.w,array:a.vm.nuovoCompostoSettore.h,cod:a.vm.nuovoCompostoSettore.c,view:a.vm.nuovoCompostoSettore.v}).success(function(b){console.log("Risposta dalla pagina PHP",
b);-1!=a.vm.nuovoCompostoSettore.c?(a.vm.compostiSettori.push(a.vm.nuovoCompostoSettore),a.vm.saveCompostoSettoreData()):a.saveDataDB();a.newItem()}).error(function(a,b){console.log(b)})):a.errore.compostoSettore=!0)}}]);
