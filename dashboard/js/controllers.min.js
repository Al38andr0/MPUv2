var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,c,d){a instanceof String&&(a=String(a));for(var k=a.length,f=0;f<k;f++){var e=a[f];if(c.call(d,e,f,a))return{i:f,v:e}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,d){a!=Array.prototype&&a!=Object.prototype&&(a[c]=d.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,c,d,k){if(c){d=$jscomp.global;a=a.split(".");for(k=0;k<a.length-1;k++){var f=a[k];f in d||(d[f]={});d=d[f]}a=a[a.length-1];k=d[a];c=c(k);c!=k&&null!=c&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,d){return $jscomp.findInternal(this,a,d).v}},"es6","es3");angular.module("mpuDashboard").controller("mainCtrl",mainCtrl);mainCtrl.$inject="$scope $rootScope $location _ $cookies dataSvc $timeout dashboardPages $http".split(" ");
function mainCtrl(a,c,d,k,f,e,g,h,b){c.options={show:[{id:1,label:"Online"},{id:0,label:"Offline"}],finitura:[{id:1,label:"Rivestimento"},{id:0,label:"Finitura"}],homepage:[{id:1,label:"Visibile"},{id:0,label:"Non visibile"}],vetrina:[{id:1,label:"Attivata"},{id:0,label:"Disattivata"}]};c.Actions=function(a,l){this.success=function(b){console.log("Risposta dalla pagina PHP",b);a.$emit("updateTable");"Updated"!==b.data&&a.actions.reset();c.saving=!1;a.confirm=!1};this.fail=function(a){console.log(a);
c.saving=!1};this.confirm=function(){a.confirm=!0;g(function(){return a.confirm=!1},4E3)};this.create=function(){c.saving=!0;var m=a.buildBody();b.post("php/"+l+".php?type=new",JSON.stringify(m)).then(this.success,this.fail)};this.update=function(){c.saving=!0;var m=a.buildBody();m.id=a.entity.id;b.post("php/"+l+".php?type=update",JSON.stringify(m)).then(this.success,this.fail)};this.erase=function(){c.saving=!0;var m=a.buildBody();m.id=a.entity.id;b.post("php/"+l+".php?type=delete",JSON.stringify(m)).then(this.success,
this.fail)}};c.settings={itemsPerPage:5,query:{},tooltip:"top",show:function(a,b){return a>=(b-1)*c.settings.itemsPerPage&&a<b*c.settings.itemsPerPage},convert:function(a,b,l,d){if(c[b])return k.find(c[b],function(b){return parseInt(b[l])===parseInt(a)})[d]},parse:function(a){return JSON.parse(a)},generateObject:function(a,b,l){var m=[];k.each(c[a],function(a){var c=parseInt(a[b+"_id"]);m.push({id:c,nome:a[b+"_nome"],checked:l?-1!==l.indexOf(c):!1})});return m},replaceAll:function(a,b,l){return a.replace(new RegExp(b,
"g"),l)}};c.load=function(a,l){if(!l&&c[a])return c[a];b.get("php/"+a+".php?type=get").then(function(b){console.log("GET "+a+": risposta dalla pagina PHP",b.data);c[a]=b.data;c.$broadcast(a)},function(a){console.log(a)})};c.Model=function(){this.list=[];this.currentPage=1};a.vm={currentPage:1,itemsPerPage:10,maxSize:10,dummy:{image:!1},nuovaFinituraTabella:{m:!1,l:!1},nuovoAbbinamento:{m:!1,l:!1,u:!1,f:[{i:!1,n:""}]},nuovoProdotto:{m:!1,l:!1,t:!1,a:"",y:1,f:0,z:[{z:"",a:""}]},nuovaLineaSettore:{v:1,
p:0,z:2,q:[],m:!1,r:!1},nuovoProdottoSettore:{m:!1,l:!1,c:!1,h:[]},nuovaVetrina:{m:!1,l:!1,v:1,y:1},nuovoVetrinaProdotto:{c:!1,p:!1,m:!1,k:!1,l:!1,j:!1,u:!1,f:!1,y:1,q:1},nuovaEsposizione:{m:!1,l:!1,t:!1,y:1},nuovoEsposizioneProdotto:{c:!1,p:!1,m:!1,k:!1,l:!1,j:!1,u:!1,f:!1,y:1,q:1},nuovoEsposizioneSettore:{m:!1,l:!1,c:!1,v:0,h:[]},nuovoComposto:{m:!1,l:!1,y:1},nuovoCompostoProdotto:{c:!1,p:!1,m:!1,k:!1,l:!1,j:!1,u:!1,f:!1,y:1,q:1},nuovoCompostoSettore:{m:!1,l:!1,c:!1,v:0,h:[]},nuovaNazione:{v:1},
nuovaRegione:{z:!1},nuovaProvincia:{z:!1,r:!1,b:0,l:0,t:0,j:1,m:0,k:1},nuovaConvenzione:{},nuovoAgente:{r:!1},nuovoRivenditore:{z:!1,r:!1,p:!1,b:0,l:0,t:0,j:1,m:0,k:1,v:!1,c:"",h:"",f:"",a:""}};a.filtro={show:"",categoria:{i:!1},settore:"",marchio:{i:!1,n:""},tbpr:{i:!1,n:""},finitura:{i:!1,n:"",c:""},linea:{i:!1,n:""},newLinea:{i:!1,n:""},finituraTabella:{i:!1,n:""},abbinamento:{i:!1,c:""},lineaSettore:{i:!1,n:"",c:""},prodotto:{c:""},prodottoSettore:{n:""},vetrina:{c:""},vetrinaProdotto:{c:"",p:""},
esposizione:{c:""},esposizioneProdotto:{e:"",p:""},esposizioneSettore:{c:""},composto:{c:""},compostoProdotto:{c:"",p:""},compostoSettore:{c:""},nazione:{i:""},regione:{n:"",i:""},provincia:{n:""},convenzione:{n:""},rivenditore:{n:""},agente:{r:""}};a.$watch("filtro.marchio.i",function(){a.filtro.linea.n="";a.filtro.linea.i=!1});a.errore={marchio:!1,tbpr:!1,finitura:!1,linea:!1,finituraTabella:!1,abbinamento:!1,lineaSettore:!1,prodotto:!1,prodottoSettore:!1,vetrina:!1,vetrinaProdotto:!1,esposizione:!1,
esposizioneProdotto:!1,composto:!1,compostoProdotto:!1,regione:!1,provincia:!1,rivenditore:!1,agente:!1};c.saving=!1;c.changing=!1;var l=function(b){a.vm.currentSubLink=b.slice(1);a.vm.currentPage=1;a.vm.itemsPerPage=10;a.filtro.show=""};a.vm.changeLink=function(a){d.path(a.link);l(d.path())};a.$on("$locationChangeSuccess",function(){l(d.path())});e.finitureTabelle().then(function(b){a.vm.finitureTabelle=b.data;a.vm.nuovaFinituraTabella.i=k.max(a.vm.finitureTabelle,function(a){return a.i}).i+1});
e.abbinamenti().then(function(b){a.vm.abbinamenti=b.data;a.vm.nuovoAbbinamento.i=k.max(a.vm.abbinamenti,function(a){return a.i}).i+1});e.prodotti().then(function(b){a.vm.prodotti=b.data;a.vm.nuovoProdotto.i=k.max(a.vm.prodotti,function(a){return a.i}).i+1});e.lineeSettori().then(function(b){a.vm.lineeSettori=b.data;a.vm.nuovaLineaSettore.i=k.max(a.vm.lineeSettori,function(a){return a.i}).i+1});e.prodottiSettori().then(function(b){a.vm.prodottiSettori=b.data;a.vm.nuovoProdottoSettore.i=k.max(a.vm.prodottiSettori,
function(a){return a.i}).i+1});e.vetrine().then(function(b){a.vm.vetrine=b.data;a.vm.nuovaVetrina.i=k.max(a.vm.vetrine,function(a){return a.i}).i+1});e.vetrineProdotti().then(function(b){a.vm.vetrineProdotti=b.data;a.vm.nuovoVetrinaProdotto.i=k.max(a.vm.vetrineProdotti,function(a){return a.i}).i+1});e.esposizioni().then(function(b){a.vm.esposizioni=b.data;a.vm.nuovaEsposizione.i=k.max(a.vm.esposizioni,function(a){return a.i}).i+1});e.esposizioniProdotti().then(function(b){a.vm.esposizioniProdotti=
b.data;a.vm.nuovoEsposizioneProdotto.i=k.max(a.vm.esposizioniProdotti,function(a){return a.i}).i+1});e.esposizioniSettori().then(function(b){a.vm.esposizioniSettori=b.data;a.vm.nuovoEsposizioneSettore.i=k.max(a.vm.esposizioniSettori,function(a){return a.i}).i+1});e.composti().then(function(b){a.vm.composti=b.data;a.vm.nuovoComposto.i=k.max(a.vm.composti,function(a){return a.i}).i+1});e.compostiProdotti().then(function(b){a.vm.compostiProdotti=b.data;a.vm.nuovoCompostoProdotto.i=k.max(a.vm.compostiProdotti,
function(a){return a.i}).i+1});e.compostiSettori().then(function(b){a.vm.compostiSettori=b.data;a.vm.nuovoCompostoSettore.i=k.max(a.vm.compostiSettori,function(a){return a.i}).i+1});e.nazioni().then(function(b){a.vm.nazioni=b.data;a.vm.nuovaNazione.i=0===a.vm.nazioni.length?1:k.max(a.vm.nazioni,function(a){return a.i}).i+1});e.regioni().then(function(b){a.vm.regioni=b.data;a.vm.nuovaRegione.i=0===a.vm.regioni.length?1:k.max(a.vm.regioni,function(a){return a.i}).i+1});e.province().then(function(b){a.vm.province=
b.data;a.vm.nuovaProvincia.i=0===a.vm.province.length?1:k.max(a.vm.province,function(a){return a.i}).i+1});e.convenzioni().then(function(b){a.vm.convenzioni=b.data;a.vm.nuovaConvenzione.i=0===a.vm.convenzioni.length?1:k.max(a.vm.convenzioni,function(a){return a.i}).i+1});e.agenti().then(function(b){a.vm.agenti=b.data?b.data:[];a.vm.nuovoAgente.i=0===a.vm.agenti.length?1:k.max(a.vm.agenti,function(a){return a.i}).i+1});e.rivenditori().then(function(b){a.vm.rivenditori=b.data;a.vm.nuovoRivenditore.i=
k.max(a.vm.rivenditori,function(a){return a.i}).i+1});a.sorting=function(b){a.vm.sorting=a.vm.sorting===b?"-"+b:b};a.convert=function(b,l,c){var d=[],m="";if("object"===typeof b){for(var e={i:0};e.i<b.length;e={i:e.i},e.i++)k.each(a.vm[l],function(a){return function(l){l.i===b[a.i]&&d.push(l[c])}}(e));return d}k.each(a.vm[l],function(a){a.i===b&&(m=a[c])});return m};Number.prototype.formatMoney=function(a,b,l){var c=this,d=isNaN(a=Math.abs(a))?2:a;a=void 0===b?".":b;l=void 0===l?",":l;b=0>c?"-":"";
var m=parseInt(c=Math.abs(+c||0).toFixed(d))+"",e=3<m.length?m.length%3:0;return b+(e?m.substr(0,e)+l:"")+m.substr(e).replace(/(\d{3})(?=\d)/g,"$1"+l)+(d?a+Math.abs(c-m).toFixed(d).slice(2):"")};a.convertPrice=function(a){return a.formatMoney(2,",",".")};a.convertFinType=function(a){return 0===a?"Finitura":"Rivestimento"};a.convertPriceType=function(a){switch(a){case 1:return"Best price";case 2:return"Economico";case 3:return"Design";case 4:return"Alto design";case 5:return"Luxury"}};a.vm.links=h}
angular.module("mpuDashboard").controller("categorieCtrl",categorieCtrl);categorieCtrl.$inject=["$scope","$rootScope"];
function categorieCtrl(a,c){a.entity=new c.Model;a.entity.categoria={show:1,immagine:!1};a.selectItem=function(c){a.entity.categoria={id:parseInt(c.cat_id),nome:c.cat_nome,posizione:parseInt(c.cat_pos),show:parseInt(c.cat_show),immagine:"/dashboard/archivio_dati/Categorie/"+parseInt(c.cat_id)+".jpg",descrizione:c.cat_txt}};a.$on("updateTable",function(){return c.load("categorie",!0)});c.load("categorie")}angular.module("mpuDashboard").controller("settoriCtrl",settoriCtrl);
settoriCtrl.$inject=["$scope","$rootScope"];
function settoriCtrl(a,c){a.entity=new c.Model;a.entity.settore={show:1,homepage:0,categoria:!1,immagine:!1};a.selectItem=function(c){a.entity.settore={id:parseInt(c.set_id),nome:c.set_nome,categoria:c.set_cat_id,posizione:parseInt(c.set_pos),show:parseInt(c.set_show),homepage:parseInt(c.set_home),immagine:"/dashboard/archivio_dati/Settori/"+parseInt(c.set_id)+".jpg",descrizione:c.set_txt}};a.$on("updateTable",function(){return c.load("settori",!0)});c.load("settori");c.load("categorie")}
angular.module("mpuDashboard").controller("marchiCtrl",marchiCtrl);marchiCtrl.$inject=["$scope","$rootScope"];
function marchiCtrl(a,c){a.entity=new c.Model;a.entity.marchio={show:1,categorie:c.categorie?c.settings.generateObject("categorie","cat"):[],listino:0,sconto:0};a.selectItem=function(d){a.entity.marchio={id:parseInt(d.mark_id),nome:d.mark_nome,show:parseInt(d.mark_show),listino:parseInt(d.mark_list),sconto:parseInt(d.mark_disc)};d=JSON.parse(d.mark_cat_array);a.entity.marchio.categorie=c.settings.generateObject("categorie","cat",d)};a.$on("updateTable",function(){return c.load("marchi",!0)});c.load("categorie");
c.load("marchi");c.$on("categorie",function(){a.entity.marchio.categorie=c.settings.generateObject("categorie","cat")})}angular.module("mpuDashboard").controller("tabelleProdottiCtrl",tabelleProdottiCtrl);tabelleProdottiCtrl.$inject=["$scope","$rootScope"];
function tabelleProdottiCtrl(a,c){a.entity=new c.Model;a.entity.tabella_prodotti={posizione:0,marchio:!1};a.selectItem=function(c){a.entity.tabella_prodotti={id:parseInt(c.tbpr_id),nome:c.tbpr_nome,posizione:parseInt(c.tbpr_pos),marchio:c.tbpr_mark_id}};a.$on("updateTable",function(){return c.load("tabelle_prodotti",!0)});c.load("marchi");c.load("tabelle_prodotti")}angular.module("mpuDashboard").controller("finitureCtrl",finitureCtrl);finitureCtrl.$inject=["$scope","$rootScope"];
function finitureCtrl(a,c){a.entity=new c.Model;a.entity.finitura={show:1,tipo:0,marchio:!1,immagine:!1};a.selectItem=function(d){var k=d.fin_nome,f=d.fin_cod,e=d.fin_mark_id,g=c.settings.replaceAll(k," ","_"),h=c.settings.replaceAll(f," ","_"),b=c.settings.replaceAll(c.settings.convert(e,"marchi","mark_id","mark_nome")," ","_");g=g+"_"+h+".jpg";a.entity.finitura={id:parseInt(d.fin_id),nome:k,codice:f,marchio:e,show:parseInt(d.fin_show),tipo:parseInt(d.fin_type_id),immagine:"../dashboard/archivio_dati/"+
b+"/Finiture/"+g}};a.$on("updateTable",function(){return c.load("finiture",!0)});c.load("marchi");c.load("finiture")}angular.module("mpuDashboard").controller("lineeCtrl",lineeCtrl);lineeCtrl.$inject=["$scope","$rootScope"];
function lineeCtrl(a,c){a.entity=new c.Model;a.entity.linea={show:1,vetrina:0,posizione:0,consegna:25,garanzia:2,sconto:0,abbinamenti:[],marchio:!1,categoria:!1,catalogo:"",specifiche:""};a.selectItem=function(c){a.entity.linea={id:parseInt(c.line_id),nome:c.line_nome,marchio:c.mark_id,categoria:c.cat_id,show:parseInt(c.line_show),posizione:parseInt(c.line_pos),consegna:parseInt(c.line_time),vetrina:parseInt(c.line_vtr),garanzia:parseInt(c.line_war),sconto:parseInt(c.line_disc),catalogo:parseInt(c.line_ctl),
specifiche:parseInt(c.line_spc),abbinamenti:JSON.parse(c.line_link)}};a.$on("updateTable",function(){return c.load("linee",!0)});c.load("marchi");c.load("categorie");c.load("linee")}
angular.module("mpuDashboard").controller("finitureTabelleCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout",function(a,c,d,k,f,e){a.finituraTabella={selected:!1};a.vm.sorting=["m","l","n"];a.selectFinituraTabella=function(b){a.finituraTabella={};a.finituraTabella.selected=!0;a.finituraTabella.finituraTabella=b};a.vm.saveFinitureTabelleData=function(){c.saving=!0;f.post("php/finitureTabelle.php?type=save",a.vm.finitureTabelle).success(function(){c.saving=!1}).error(function(a,c){console.log(c)})};
a.saveDataDB=function(){c.saving=!0;f.post("php/finitureTabelle.php?type=db").success(function(b){c.saving=!1;k.finitureTabelle().then(function(b){a.vm.finitureTabelle=b.data})}).error(function(a,c){console.log(c)})};var g="",h;a.$watch("input",function(b){h&&e.cancel(h);g=b;h=e(function(){a.filtro.finituraTabella.n=g},250)});a.eraseInput=function(b){27===b.key&&(a.input="")};a.newFinituraTabella=function(){c.saving=!1;a.errore.finituraTabella=!1;a.vm.nuovaFinituraTabella={i:a.vm.nuovaFinituraTabella.i+
1,m:!1,l:!1}};a.updateCheck=function(){return!a.vm.nuovaFinituraTabella.n||!a.vm.nuovaFinituraTabella.m||!a.vm.nuovaFinituraTabella.l};a.action=function(b){"N"===b&&(d.findWhere(a.vm.finitureTabelle,{n:a.vm.nuovaFinituraTabella.n,m:a.vm.nuovaFinituraTabella.m,l:a.vm.nuovaFinituraTabella.l})?a.errore.finituraTabella=!0:(c.saving=!0,f.post("php/finitureTabelle.php?type=new",{id:a.vm.nuovaFinituraTabella.i,nome:a.vm.nuovaFinituraTabella.n,line:a.vm.nuovaFinituraTabella.l,mark:a.vm.nuovaFinituraTabella.m}).success(function(b){a.vm.finitureTabelle.push(a.vm.nuovaFinituraTabella);
a.vm.saveFinitureTabelleData();a.newFinituraTabella()}).error(function(a,b){console.log(b)})))}}]);
angular.module("mpuDashboard").controller("abbinamentiCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout",function(a,c,d,k,f,e){function g(){return d.filter(a.vm.nuovoAbbinamento.f,function(a){return!a.i||!a.n}).length}a.abbinamento={selected:!1};a.vm.sorting=["m","l","c"];a.$watch("vm.nuovoAbbinamento.m",function(){a.vm.nuovoAbbinamento.l=!1;a.vm.nuovoAbbinamento.u=!1;a.vm.nuovoAbbinamento.f=[{i:!1,n:""}]});a.$watch("vm.nuovoAbbinamento.l",function(){a.vm.nuovoAbbinamento.u=!1;a.vm.nuovoAbbinamento.f=
[{i:!1,n:""}]});a.$watch("filtro.marchio.i",function(){a.filtro.linea.i=!1;a.filtro.finituraTabella.i=!1});a.$watch("filtro.linea.i",function(){a.filtro.finituraTabella.i=!1});a.addAbbinamento=function(){a.vm.nuovoAbbinamento.f.push({i:!1,n:""})};a.removeAbbinamento=function(b){a.vm.nuovoAbbinamento.f.splice(b,1)};a.selectAbbinamento=function(b){a.abbinamento={};a.abbinamento.selected=!0;a.abbinamento.abbinamento=b};a.vm.saveAbbinamentiData=function(){c.saving=!0;f.post("php/abbinamenti.php?type=save",
a.vm.abbinamenti).success(function(){c.saving=!1}).error(function(a,b){console.log(b)})};a.saveDataDB=function(){c.saving=!0;f.post("php/abbinamenti.php?type=db").success(function(b){console.log(b);c.saving=!1;k.abbinamenti().then(function(b){a.vm.abbinamenti=b.data})}).error(function(a,b){console.log(b)})};var h="",b;a.$watch("input",function(c){b&&e.cancel(b);h=c;b=e(function(){a.filtro.abbinamento.c=h},250)});a.eraseInput=function(b){27===b.key&&(a.input="")};a.newAbbinamento=function(){c.saving=
!1;a.errore.abbinamento=!1;a.vm.nuovoAbbinamento={i:a.vm.nuovoAbbinamento.i+1,m:!1,l:!1,u:!1,f:[{i:!1,n:""}]}};a.updateCheck=function(){return!a.vm.nuovoAbbinamento.c||!a.vm.nuovoAbbinamento.u};a.action=function(b){"N"===b&&(d.findWhere(a.vm.abbinamenti,{c:a.vm.nuovoAbbinamento.c,l:a.vm.nuovoAbbinamento.l,u:a.vm.nuovoAbbinamento.u})||0!==g()?a.errore.abbinamento=!0:(c.saving=!0,f.post("php/abbinamenti.php?type=new",{id:a.vm.nuovoAbbinamento.i,cod:a.vm.nuovoAbbinamento.c,line:a.vm.nuovoAbbinamento.l,
mark:a.vm.nuovoAbbinamento.m,abb_array:a.vm.nuovoAbbinamento.f,tab:a.vm.nuovoAbbinamento.u}).success(function(b){a.vm.abbinamenti.push(a.vm.nuovoAbbinamento);a.vm.saveAbbinamentiData();a.newAbbinamento()}).error(function(a,b){console.log(b)})))}}]);
angular.module("mpuDashboard").controller("lineeSettoriCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout","lineeManager",function(a,c,d,k,f,e,g){a.lineaSettore={selected:!1};a.priceName=[{n:"basso",i:1},{n:"medio/basso",i:2},{n:"medio",i:3},{n:"medio/alto",i:4},{n:"alto",i:5}];a.vm.lineeManager=g;a.vm.sorting=["m"];a.selectLineaSettore=function(b){a.lineaSettore={};a.lineaSettore.selected=!0;a.lineaSettore.lineaSettore=b};a.vm.saveLineaSettoreData=function(){c.saving=!0;f.post("php/lineeSettori.php?type=save",
a.vm.lineeSettori).success(function(){c.saving=!1}).error(function(a,b){console.log(b)})};a.saveDataDB=function(){c.saving=!0;f.post("php/lineeSettori.php?type=db").success(function(){c.saving=!1;k.lineeSettori().then(function(b){a.vm.lineeSettori=b.data})}).error(function(a,b){console.log(b)})};a.saveDataDB();var h="",b;a.$watch("input",function(c){b&&e.cancel(b);h=c;b=e(function(){a.filtro.lineaSettore.n=h},250)});a.$watch("inputCod",function(c){b&&e.cancel(b);h=c;b=e(function(){a.filtro.lineaSettore.c=
h},250)});a.toggleSet=function(b){-1===a.vm.nuovaLineaSettore.q.indexOf(b)?a.vm.nuovaLineaSettore.q.push(parseInt(b)):a.vm.nuovaLineaSettore.q.splice(a.vm.nuovaLineaSettore.q.indexOf(b),1)};a.checkList=function(b){return-1!==a.vm.nuovaLineaSettore.q.indexOf(b)};a.eraseInput=function(b,c){27===b.key&&(c?a.inputCod="":a.input="")};a.updateCheck=function(){return!a.vm.nuovaLineaSettore.h||!a.vm.nuovaLineaSettore.l||!a.vm.nuovaLineaSettore.r};a.newItem=function(){c.saving=!1;a.vm.nuovaLineaSettore={i:a.vm.nuovaLineaSettore.i+
1,v:1,p:0,z:2,q:[],m:!1,r:!1};a.errore.lineaSettore=!1};a.action=function(b){"N"===b&&(d.findWhere(a.vm.lineeSettori,{m:a.vm.nuovaLineaSettore.m,l:a.vm.nuovaLineaSettore.l,h:a.vm.nuovaLineaSettore.h})||0===a.vm.nuovaLineaSettore.length?a.errore.lineaSettore=!0:(c.saving=!0,f.post("php/lineeSettori.php?type=new",{id:a.vm.nuovaLineaSettore.i,line:a.vm.nuovaLineaSettore.l,price:a.vm.nuovaLineaSettore.z,show:a.vm.nuovaLineaSettore.v,mark:a.vm.nuovaLineaSettore.m,man:a.vm.nuovaLineaSettore.q,image:a.vm.nuovaLineaSettore.r,
set:a.vm.nuovaLineaSettore.h}).success(function(b){console.log("Risposta dalla pagina PHP",b);delete a.vm.nuovaLineaSettore.r;a.vm.lineeSettori.push(a.vm.nuovaLineaSettore);a.vm.saveLineaSettoreData();a.newItem()}).error(function(a,b){console.log(b)})))}}]);
angular.module("mpuDashboard").controller("prodottiCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout",function(a,c,d,k,f,e){a.prodotto={selected:!1};a.vm.sorting="c";a.$watch("vm.nuovoProdotto.m",function(){a.vm.nuovoProdotto.l=!1;a.vm.nuovoProdotto.u=!1;a.vm.nuovoProdotto.t=!1;a.vm.nuovoProdotto.x=!1;a.vm.nuovoProdotto.z=[{z:"",a:""}]});a.$watch("vm.nuovoProdotto.l",function(){a.vm.nuovoProdotto.u=!1;a.vm.nuovoProdotto.t=!1;a.vm.nuovoProdotto.x=!1;a.vm.nuovoProdotto.z=[{z:"",a:""}]});
a.$watch("filtro.marchio.i",function(){a.filtro.linea.i=!1});a.addProdotto=function(){a.vm.nuovoProdotto.z.push({z:"",a:""})};a.removeProdotto=function(b){a.vm.nuovoProdotto.z.splice(b,1)};a.selectProdotto=function(b){a.prodotto={};a.prodotto.selected=!0;a.prodotto.prodotto=b};a.vm.saveProdottoData=function(){c.saving=!0;f.post("php/prodotti.php?type=save",a.vm.prodotti).success(function(){c.saving=!1}).error(function(a,b){console.log(b)})};a.saveDataDB=function(){c.saving=!0;f.post("php/prodotti.php?type=db").success(function(){c.saving=
!1;k.prodotti().then(function(b){a.vm.prodotti=b.data})}).error(function(a,b){console.log(b)})};var g="",h;a.$watch("input",function(b){h&&e.cancel(h);g=b;h=e(function(){a.filtro.prodotto.c=g},250)});a.eraseInput=function(b){27===b.key&&(a.input="")};a.updateCheck=function(){return!a.vm.nuovoProdotto.c||!a.vm.nuovoProdotto.n||!a.vm.nuovoProdotto.m||!a.vm.nuovoProdotto.l||!a.vm.nuovoProdotto.x||!a.vm.nuovoProdotto.t||!a.vm.nuovoProdotto.r};var b=function(){return d.filter(a.vm.nuovoProdotto.z,function(a){return isNaN(a.z)||
!a.z||!a.a}).length};a.newProdotto=function(){c.saving=!1;a.errore.prodotto=!1;a.vm.nuovoProdotto={i:a.vm.nuovoProdotto.i+1,m:!1,l:!1,t:!1,a:"",y:1,f:0,z:[{z:"",a:""}]}};a.action=function(l){"N"===l&&(d.findWhere(a.vm.prodotti,{c:a.vm.nuovoProdotto.c,l:a.vm.nuovoProdotto.l})||0!==b()?a.errore.prodotto=!0:(c.saving=!0,f.post("php/prodotti.php?type=new",{id:a.vm.nuovoProdotto.i,mark:a.vm.nuovoProdotto.m,line:a.vm.nuovoProdotto.l,cod:a.vm.nuovoProdotto.c,title:a.vm.nuovoProdotto.n,tbpr:a.vm.nuovoProdotto.t,
dim:a.vm.nuovoProdotto.d,pos:a.vm.nuovoProdotto.y,lnfn:a.vm.nuovoProdotto.x,note:a.vm.nuovoProdotto.o,abb:a.vm.nuovoProdotto.a,fin:a.vm.nuovoProdotto.f,prices:a.vm.nuovoProdotto.z,image:a.vm.nuovoProdotto.r}).success(function(b){console.log("Risposta dalla pagina PHP",b);delete a.vm.nuovoProdotto.r;a.vm.prodotti.push(a.vm.nuovoProdotto);a.vm.saveProdottoData();a.newProdotto()}).error(function(a,b){console.log(b)})))}}]);
angular.module("mpuDashboard").controller("prodottiSettoriCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout",function(a,c,d,k,f,e){a.prodottoSettore={selected:!1};a.vm.sorting="n";a.$watch("vm.nuovoProdottoSettore.m",function(){a.vm.nuovoProdottoSettore.l=!1;a.vm.nuovoProdottoSettore.w=!1;a.vm.nuovoProdottoSettore.c=!1});a.$watch("vm.nuovoProdottoSettore.l",function(b){a.vm.nuovoProdottoSettore.c=!1});a.$watch("vm.nuovoProdottoSettore.w",function(b){a.settoriAvailable=d.where(a.vm.lineeSettori,
{l:b});d.each(a.settoriAvailable,function(b){b.n=d.findWhere(a.vm.settori,{i:b.h}).n});a.prodottiAvailable=[{c:" Tutti",i:-1}];var c=d.where(a.vm.prodotti,{l:a.vm.nuovoProdottoSettore.l});d.each(c,function(c){d.find(a.vm.prodottiSettori,function(a){return a.c===c.i&&b===c.l})||a.prodottiAvailable.push(c)})});a.$watch("vm.nuovoProdottoSettore.c",function(b){if(b&&-1!==b){var c=d.find(a.vm.prodotti,function(a){return a.i===b});a.vm.nuovoProdottoSettore.n=c.c}});a.toggleSet=function(b){-1===a.vm.nuovoProdottoSettore.h.indexOf(b)?
a.vm.nuovoProdottoSettore.h.push(parseInt(b)):a.vm.nuovoProdottoSettore.h.splice(a.vm.nuovoProdottoSettore.h.indexOf(b),1)};a.selectProdottoSettore=function(b){a.prodottoSettore={};a.prodottoSettore.selected=!0;a.prodottoSettore.prodottoSettore=b};a.vm.saveProdottoSettoreData=function(){c.saving=!0;f.post("php/prodottiSettori.php?type=save",a.vm.prodottiSettori).success(function(){c.saving=!1}).error(function(a,c){console.log(c)})};a.saveDataDB=function(){c.saving=!0;f.post("php/prodottiSettori.php?type=db").success(function(){c.saving=
!1;k.prodottiSettori().then(function(b){a.vm.prodottiSettori=b.data})}).error(function(a,c){console.log(c)})};var g="",h;a.$watch("input",function(b){h&&e.cancel(h);g=b;h=e(function(){a.filtro.prodottoSettore.n=g},250)});a.eraseInput=function(b){27===b.key&&(a.input="")};a.newProdottoSettore=function(b){c.saving=!1;a.errore.prodottoSettore=!1;a.vm.nuovoProdottoSettore={m:!1,l:!1,c:!1,h:[]};a.vm.nuovoProdottoSettore.i=b?parseInt(b)+1:a.vm.nuovoProdottoSettore.i+1;console.log(a.vm.nuovoProdottoSettore.i)};
a.updateCheck=function(){return!a.vm.nuovoProdottoSettore.m||!a.vm.nuovoProdottoSettore.l||!a.vm.nuovoProdottoSettore.w||!a.vm.nuovoProdottoSettore.c};a.action=function(b){"N"===b&&(0!==a.vm.nuovoProdottoSettore.h.length?(c.saving=!0,f.post("php/prodottiSettori.php?type=new",{id:a.vm.nuovoProdottoSettore.i,mark:a.vm.nuovoProdottoSettore.m,line:a.vm.nuovoProdottoSettore.l,nwln:a.vm.nuovoProdottoSettore.w,array:a.vm.nuovoProdottoSettore.h,cod:a.vm.nuovoProdottoSettore.c}).success(function(b){console.log("Risposta dalla pagina PHP",
b);-1!==a.vm.nuovoProdottoSettore.c?(a.vm.prodottiSettori.push(a.vm.nuovoProdottoSettore),a.vm.saveProdottoSettoreData()):a.saveDataDB();a.newProdottoSettore(b)}).error(function(a,b){console.log(b)})):a.errore.prodottoSettore=!0)}}]);
angular.module("mpuDashboard").controller("vetrineCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout",function(a,c,d,k,f,e){a.vetrina={selected:!1};a.generateSettoriInLinea=function(b){if(b){var c=[],e=d.find(a.vm.linee,function(a){return a.i===b}).q;d.each(e,function(b){var l=d.find(a.vm.settori,function(a){return a.i===b}).n;c.push({i:b,n:l})});return c}};a.settoriInLinea=!1;a.selectVetrina=function(b){a.vetrina={};a.vetrina.selected=!0;a.vetrina.vetrina=b};a.vm.sorting="c";a.toggleSet=
function(b){-1===a.vm.nuovaVetrina.s.indexOf(b)?a.vm.nuovaVetrina.s.push(parseInt(b)):a.vm.nuovaVetrina.s.splice(a.vm.nuovaVetrina.s.indexOf(b),1)};a.$watch("vm.nuovaVetrina.m",function(){a.vm.nuovaVetrina.l=!1;a.vm.nuovaVetrina.h=[]});a.$watch("vm.nuovaVetrina.l",function(b,c){a.vm.nuovaVetrina.h=[];a.settoriInLinea=a.generateSettoriInLinea(b)});a.vm.saveVetrinaData=function(){c.saving=!0;f.post("php/vetrine.php?type=save",a.vm.vetrine).success(function(){c.saving=!1}).error(function(a,c){console.log(c)})};
a.saveDataDB=function(){c.saving=!0;f.post("php/vetrine.php?type=db").success(function(){c.saving=!1;k.vetrine().then(function(b){a.vm.vetrine=b.data})}).error(function(a,c){console.log(c)})};var g="",h;a.$watch("input",function(b){h&&e.cancel(h);g=b;h=e(function(){a.filtro.vetrina.c=g},250)});a.eraseInput=function(b){27===b.key&&(a.input="")};a.updateCheck=function(){return!a.vm.nuovaVetrina.c||!a.vm.nuovaVetrina.n||!a.vm.nuovaVetrina.m||!a.vm.nuovaVetrina.l||!a.vm.nuovaVetrina.r||!a.vm.nuovaVetrina.s||
isNaN(a.vm.nuovaVetrina.y)};a.newVetrina=function(){c.saving=!1;a.errore.vetrina=!1;a.vm.nuovaVetrina={i:a.vm.nuovaVetrina.i+1,m:!1,l:!1,s:!1,y:1,v:1}};a.action=function(b){"N"===b&&(d.findWhere(a.vm.vetrine,{c:a.vm.nuovaVetrina.c,l:a.vm.nuovaVetrina.l})?a.errore.vetrina=!0:(c.saving=!0,f.post("php/vetrine.php?type=new",{id:a.vm.nuovaVetrina.i,mark:a.vm.nuovaVetrina.m,line:a.vm.nuovaVetrina.l,cod:a.vm.nuovaVetrina.c,title:a.vm.nuovaVetrina.n,pos:a.vm.nuovaVetrina.y,show:a.vm.nuovaVetrina.v,note:a.vm.nuovaVetrina.o,
settore:a.vm.nuovaVetrina.s,image:a.vm.nuovaVetrina.r}).success(function(b){console.log("Risposta dalla pagina PHP",b);delete a.vm.nuovaVetrina.r;a.vm.vetrine.push(a.vm.nuovaVetrina);a.vm.saveVetrinaData();a.newVetrina()}).error(function(a,b){console.log(b)})))}}]);
angular.module("mpuDashboard").controller("vetrineProdottiCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout",function(a,c,d,k,f,e){a.vetrinaProdotto={selected:!1};a.vm.sorting=["y","j","c"];a.$watch("vm.nuovoVetrinaProdotto.k",function(b){a.vm.nuovoVetrinaProdotto.m=b;a.vm.nuovoVetrinaProdotto.j=!1});a.$watch("vm.nuovoVetrinaProdotto.j",function(b){a.vm.nuovoVetrinaProdotto.l=b;a.vm.nuovoVetrinaProdotto.c=!1});a.$watch("vm.nuovoVetrinaProdotto.m",function(){a.vm.nuovoVetrinaProdotto.l=
!1});a.$watch("vm.nuovoVetrinaProdotto.l",function(){a.vm.nuovoVetrinaProdotto.p=!1});a.$watch("vm.nuovoVetrinaProdotto.p",function(b){if(b){b=d.findWhere(a.vm.prodotti,{i:b});b=d.pluck(b.z,"a");a.tabsAvailable=[];for(var c=0;c<b.length;c++){var e=d.findWhere(a.vm.finitureTabelle,{i:b[c]});a.tabsAvailable.push({i:b[c],n:e.n})}return a.tabsAvailable}a.vm.nuovoVetrinaProdotto.u=!1});a.$watch("vm.nuovoVetrinaProdotto.u",function(b){if(b)return a.finsAvailable=d.where(a.vm.abbinamenti,{u:b}),a.finsAvailable;
a.vm.nuovoVetrinaProdotto.f=!1});a.selectVetrinaProdotto=function(b){a.vetrinaProdotto={};a.vetrinaProdotto.selected=!0;a.vetrinaProdotto.vetrinaProdotto=b};a.vm.saveVetrineProdottiData=function(){c.saving=!0;f.post("php/vetrineProdotti.php?type=save",a.vm.vetrineProdotti).success(function(){c.saving=!1}).error(function(a,c){console.log(c)})};a.saveDataDB=function(){c.saving=!0;f.post("php/vetrineProdotti.php?type=db").success(function(){c.saving=!1;k.vetrineProdotti().then(function(b){a.vm.vetrineProdotti=
b.data})}).error(function(a,c){console.log(c)})};var g="",h;a.$watch("input",function(b){h&&e.cancel(h);g=b;h=e(function(){if(g||""!==g){var b=[];d.each(a.vm.vetrine,function(a){a.c===g&&b.push(a.i)});a.filtro.vetrinaProdotto.c=b}else a.filtro.vetrinaProdotto.c=!1},250)});a.$watch("inputCod",function(b){h&&e.cancel(h);g=b;h=e(function(){g&&(g=g.toUpperCase());if(""!==g){var b=d.findWhere(a.vm.prodotti,{c:g});b&&(a.filtro.vetrinaProdotto.p=b.i)}else a.filtro.vetrinaProdotto.p=!1},250)});a.eraseInput=
function(b,c){27===b.key&&(c?a.inputCod="":a.input="")};a.newVetrinaProdotto=function(){c.saving=!1;a.errore.vetrinaProdotto=!1;a.vm.nuovoVetrinaProdotto={i:a.vm.nuovoVetrinaProdotto.i+1,c:!1,p:!1,m:!1,k:!1,l:!1,j:!1,u:!1,f:!1,y:1,q:1}};a.updateCheck=function(){return!a.vm.nuovoVetrinaProdotto.c||!a.vm.nuovoVetrinaProdotto.p||!a.vm.nuovoVetrinaProdotto.l||!a.vm.nuovoVetrinaProdotto.j||!a.vm.nuovoVetrinaProdotto.u||!a.vm.nuovoVetrinaProdotto.f||isNaN(a.vm.nuovoVetrinaProdotto.y)||isNaN(a.vm.nuovoVetrinaProdotto.q)};
a.action=function(b){"N"===b&&(c.saving=!0,f.post("php/vetrineProdotti.php?type=new",{id:a.vm.nuovoVetrinaProdotto.i,comp:a.vm.nuovoVetrinaProdotto.c,prd:a.vm.nuovoVetrinaProdotto.p,pline:a.vm.nuovoVetrinaProdotto.l,cline:a.vm.nuovoVetrinaProdotto.j,pmark:a.vm.nuovoVetrinaProdotto.m,cmark:a.vm.nuovoVetrinaProdotto.k,fin:a.vm.nuovoVetrinaProdotto.f,tab:a.vm.nuovoVetrinaProdotto.u,pos:a.vm.nuovoVetrinaProdotto.y,qnt:a.vm.nuovoVetrinaProdotto.q}).success(function(b){a.vm.vetrineProdotti.push(a.vm.nuovoVetrinaProdotto);
a.vm.saveVetrineProdottiData();a.newVetrinaProdotto()}).error(function(a,b){console.log(b)}))}}]);
angular.module("mpuDashboard").controller("nazioniCtrl",["$scope","$rootScope","_","dataSvc","$http",function(a,c,d,k,f){a.vm.saveNazioniData=function(){c.saving=!0;f.post("php/nazioni.php?type=save",a.vm.nazioni).success(function(){c.saving=!1}).error(function(a,c){console.log(c)})};a.saveDataDB=function(){c.saving=!0;f.post("php/nazioni.php?type=db",a.vm.nazioni).success(function(){c.saving=!1;k.nazioni().then(function(c){a.vm.nazioni=c.data})}).error(function(a,c){console.log(c)})};a.updateCheck=
function(){return!a.vm.nuovaNazione.n||!a.vm.nuovaNazione.x};a.action=function(d){"N"===d&&(c.saving=!0,f.post("php/nazioni.php?type=new",{id:a.vm.nuovaNazione.i,nome:a.vm.nuovaNazione.n,show:a.vm.nuovaNazione.v,prx:a.vm.nuovaNazione.x}).success(function(d){a.vm.nazioni.push(a.vm.nuovaNazione);a.vm.nuovaNazione={v:1,i:a.vm.nuovaNazione.i+1};a.vm.saveNazioniData();c.saving=!1}).error(function(a,c){console.log(c)}))}}]);
angular.module("mpuDashboard").controller("regioniCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout",function(a,c,d,k,f,e){a.vm.sorting="n";a.regione={selected:!1};a.selectRegione=function(b){a.regione={};a.regione.selected=!0;a.regione.regione=b};a.vm.saveRegioniData=function(){c.saving=!0;f.post("php/regioni.php?type=save",a.vm.regioni).success(function(){c.saving=!1}).error(function(a,c){console.log(c)})};a.saveDataDB=function(){c.saving=!0;f.post("php/regioni.php?type=db",a.vm.regioni).success(function(){c.saving=
!1;k.regioni().then(function(b){a.vm.regioni=b.data})}).error(function(a,c){console.log(c)})};a.updateCheck=function(){return!a.vm.nuovaRegione.n||!a.vm.nuovaRegione.z};a.newItem=function(){c.saving=!1;a.regione.selected=!1;a.errore.regione=!1;a.vm.nuovaRegione={i:a.vm.nuovaRegione.i+1,z:!1}};var g="",h;a.$watch("input",function(b){h&&e.cancel(h);g=b;h=e(function(){a.filtro.regione.n=g},250)});a.eraseInput=function(b){27===b.key&&(a.input="")};a.action=function(b){"N"===b&&(d.findWhere(a.vm.regioni,
{n:a.vm.nuovaRegione.n,z:a.vm.nuovaRegione.z})?a.errore.regione=!0:(c.saving=!0,f.post("php/regioni.php?type=new",{id:a.vm.nuovaRegione.i,nome:a.vm.nuovaRegione.n,nazione:a.vm.nuovaRegione.z}).success(function(b){a.vm.regioni.push(a.vm.nuovaRegione);a.newItem();a.vm.saveRegioniData()}).error(function(a,b){console.log(b)})))}}]);
angular.module("mpuDashboard").controller("provinceCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout","priceManager",function(a,c,d,k,f,e,g){a.vm.sorting=["z","r","n"];a.provincia={selected:!1};a.vm.priceManager=g;a.$watch("filtro.nazione.i",function(b){a.filtro.regione.i=!1});a.selectItem=function(b){a.provincia={};a.provincia.selected=!0;a.provincia.provincia=b};a.vm.saveProvinceData=function(){c.saving=!0;f.post("php/province.php?type=save",a.vm.province).success(function(){c.saving=
!1}).error(function(a,b){console.log(b)})};a.saveDataDB=function(){c.saving=!0;f.post("php/province.php?type=db",a.vm.province).success(function(){c.saving=!1;k.province().then(function(b){a.vm.province=b.data})}).error(function(a,b){console.log(b)})};a.updateCheck=function(){return!a.vm.nuovaProvincia.n||!a.vm.nuovaProvincia.z};a.newItem=function(){c.saving=!1;a.provincia.selected=!1;a.errore.provincia=!1;a.vm.nuovaProvincia={i:a.vm.nuovaProvincia.i+1,z:!1,r:!1,b:0,l:0,t:0,j:1,m:0,k:1}};var h="",
b;a.$watch("input",function(c){b&&e.cancel(b);h=c;b=e(function(){a.filtro.provincia.n=h},250)});a.eraseInput=function(b){27===b.key&&(a.input="")};a.action=function(b){"N"===b&&(d.findWhere(a.vm.province,{n:a.vm.nuovaProvincia.n,c:a.vm.nuovaProvincia.c,z:a.vm.nuovaProvincia.z,r:a.vm.nuovaProvincia.r})?a.errore.provincia=!0:(c.saving=!0,f.post("php/province.php?type=new",{id:a.vm.nuovaProvincia.i,nome:a.vm.nuovaProvincia.n,sigla:a.vm.nuovaProvincia.c,nazione:a.vm.nuovaProvincia.z,regione:a.vm.nuovaProvincia.r,
trasporto:a.vm.nuovaProvincia.t,trasporto_type:a.vm.nuovaProvincia.j,montaggio:a.vm.nuovaProvincia.m,montaggio_type:a.vm.nuovaProvincia.k,limite:a.vm.nuovaProvincia.l,minimo:a.vm.nuovaProvincia.b}).success(function(b){console.log("Risposta dalla pagina PHP",b);a.vm.province.push(a.vm.nuovaProvincia);a.newItem();a.vm.saveProvinceData()}).error(function(a,b){console.log(b)})))}}]);
angular.module("mpuDashboard").controller("convenzioniCtrl",["$scope","$rootScope","_","dataSvc","$http",function(a,c,d,k,f){a.vm.saveConvenzioniData=function(){c.saving=!0;f.post("php/convenzioni.php?type=save",a.vm.convenzioni).success(function(){c.saving=!1}).error(function(a,c){console.log(c)})};a.saveDataDB=function(){c.saving=!0;f.post("php/convenzioni.php?type=db",a.vm.convenzioni).success(function(){c.saving=!1;k.convenzioni().then(function(c){a.vm.convenzioni=c.data})}).error(function(a,
c){console.log(c)})};a.updateCheck=function(){return!a.vm.nuovaConvenzione.n};a.action=function(d){"N"===d&&(c.saving=!0,f.post("php/convenzioni.php?type=new",{id:a.vm.nuovaConvenzione.i,nome:a.vm.nuovaConvenzione.n,email:a.vm.nuovaConvenzione.e}).success(function(d){a.vm.convenzioni.push(a.vm.nuovaConvenzione);a.vm.nuovaConvenzione={i:a.vm.nuovaConvenzione.i+1};a.vm.saveConvenzioniData();c.saving=!1}).error(function(a,c){console.log(c)}))}}]);
angular.module("mpuDashboard").controller("agentiCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout",function(a,c,d,k,f,e){a.vm.sorting="n";a.agente={selected:!1};a.selectItem=function(b){a.agente={};a.agente.selected=!0;a.agente.agente=b};a.vm.saveAgentiData=function(){c.saving=!0;f.post("php/agenti.php?type=save",a.vm.agenti).success(function(){c.saving=!1}).error(function(a,c){console.log(c)})};a.saveDataDB=function(){c.saving=!0;f.post("php/agenti.php?type=db",a.vm.agenti).success(function(){c.saving=
!1;k.agenti().then(function(b){a.vm.agenti=b.data})}).error(function(a,c){console.log(c)})};var g="",h;a.$watch("input",function(b){h&&e.cancel(h);g=b;h=e(function(){a.filtro.agente.n=g},250)});a.eraseInput=function(b){27===b.key&&(a.input="")};a.updateCheck=function(){return!a.vm.nuovoAgente.n||!a.vm.nuovoAgente.e||!a.vm.nuovoAgente.p||!a.vm.nuovoAgente.r||!a.vm.nuovoAgente.t};a.newItem=function(){c.saving=!1;a.vm.nuovoAgente={i:a.vm.nuovoAgente.i+1,r:!1}};a.action=function(b){"N"===b&&(c.saving=
!0,f.post("php/agenti.php?type=new",{id:a.vm.nuovoAgente.i,nome:a.vm.nuovoAgente.n,email:a.vm.nuovoAgente.e,password:a.vm.nuovoAgente.p,tel:a.vm.nuovoAgente.t,riv:a.vm.nuovoAgente.r}).success(function(b){a.vm.agenti.push(a.vm.nuovoAgente);a.vm.saveAgentiData();a.newItem();c.saving=!1}).error(function(a,b){console.log(b)}))}}]);
angular.module("mpuDashboard").controller("rivenditoriCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout","priceManager",function(a,c,d,k,f,e,g){a.rivenditore={selected:!1};a.vm.priceManager=g;a.vm.sorting=["n"];a.switchType=function(){return 0===a.vm.nuovoRivenditore.p?"rivenditore":"rivestimento"};a.selectItem=function(b){a.rivenditore={};a.rivenditore.selected=!0;a.rivenditore.rivenditore=b};a.vm.saveRivenditoreData=function(){c.saving=!0;f.post("php/rivenditori.php?type=save",a.vm.rivenditori).success(function(){c.saving=
!1}).error(function(a,b){console.log(b)})};a.saveDataDB=function(){c.saving=!0;f.post("php/rivenditori.php?type=db").success(function(){c.saving=!1;k.rivenditori().then(function(b){a.vm.rivenditori=b.data})}).error(function(a,b){console.log(b)})};a.openMarchi=function(){a.vm.mv=!a.vm.mv};var h=function(){a.vm.mv=!1;a.vm.nuovoRivenditore.y=angular.copy(a.vm.marchi);d.each(a.vm.nuovoRivenditore.y,function(a){a.s=0;a.d=0;delete a.n;delete a.b;delete a.g});return a.vm.nuovoRivenditore.y};h();var b="",
l;a.$watch("input",function(c){l&&e.cancel(l);b=c;l=e(function(){a.filtro.rivenditore.n=b},250)});a.eraseInput=function(b){27===b.key&&(a.input="")};a.$watch("vm.nuovoRivenditore.v",function(b){b&&(a.vm.nuovoRivenditore.z=!1,a.vm.nuovoRivenditore.r=!1,a.vm.nuovoRivenditore.p=!1)});a.updateCheck=function(){return(!a.vm.nuovoRivenditore.z||!a.vm.nuovoRivenditore.r||!a.vm.nuovoRivenditore.p)&&!a.vm.nuovoRivenditore.v||!a.vm.nuovoRivenditore.n||!a.vm.nuovoRivenditore.x||!a.vm.nuovoRivenditore.s||!a.vm.nuovoRivenditore.h&&
!a.vm.nuovoRivenditore.c||!a.vm.nuovoRivenditore.e||!a.vm.nuovoRivenditore.w||!a.vm.nuovoRivenditore.g};a.newItem=function(){c.saving=!1;a.errore.rivenditore=!1;a.vm.nuovoRivenditore={i:a.vm.nuovoRivenditore.i+1,z:!1,r:!1,p:!1,b:0,l:0,t:0,j:1,m:0,k:1,v:!1,c:"",h:"",f:"",a:""};h()};var m=[];a.showInfoFnc=function(a,b){"add"===b?m.push(a):(a=m.indexOf(a),m.splice(a,1))};a.checkShowInfo=function(a){return m.indexOf(a)};a.action=function(b){"N"===b&&(b=a.vm.nuovoRivenditore.p?d.findWhere(a.vm.rivenditori,
{p:a.vm.nuovoRivenditore.p}):!1,b?a.errore.rivenditore=!0:(c.saving=!0,f.post("php/rivenditori.php?type=new",{id:a.vm.nuovoRivenditore.i,nome:a.vm.nuovoRivenditore.n,naz:a.vm.nuovoRivenditore.z,reg:a.vm.nuovoRivenditore.r,prov:a.vm.nuovoRivenditore.p,conv:a.vm.nuovoRivenditore.v,rif:a.vm.nuovoRivenditore.x,sede:a.vm.nuovoRivenditore.s,tel:a.vm.nuovoRivenditore.h,fax:a.vm.nuovoRivenditore.f,cell:a.vm.nuovoRivenditore.c,web:a.vm.nuovoRivenditore.q,email:a.vm.nuovoRivenditore.e,psw:a.vm.nuovoRivenditore.w,
limite:a.vm.nuovoRivenditore.l,minimo:a.vm.nuovoRivenditore.b,trasporto:a.vm.nuovoRivenditore.t,trasporto_type:a.vm.nuovoRivenditore.j,montaggio:a.vm.nuovoRivenditore.m,montaggio_type:a.vm.nuovoRivenditore.k,mark:a.vm.nuovoRivenditore.y,notes:a.vm.nuovoRivenditore.a,image:a.vm.nuovoRivenditore.g}).success(function(b){console.log("Risposta dalla pagina PHP",b);delete a.vm.nuovoRivenditore.g;a.vm.rivenditori.push(a.vm.nuovoRivenditore);a.vm.saveRivenditoreData();a.newItem()}).error(function(a,b){console.log(b)})))}}]);
angular.module("mpuDashboard").controller("esposizioniCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout",function(a,c,d,k,f,e){a.esposizione={selected:!1};a.selectItem=function(b){a.esposizione={};a.esposizione.selected=!0;a.esposizione.esposizione=b};a.vm.sorting=["l","c","f"];a.$watch("vm.nuovaEsposizione.l",function(b){a.settoriAvailable=d.where(a.vm.lineeSettori,{l:b});d.each(a.settoriAvailable,function(b){b.n=d.findWhere(a.vm.settori,{i:b.h}).n})});a.$watch("vm.nuovaEsposizione.m",
function(){a.vm.nuovaEsposizione.l=!1;a.vm.nuovaEsposizione.t=!1});a.$watch("vm.nuovaEsposizione.l",function(){a.vm.nuovaEsposizione.t=!1});a.vm.saveEsposizioneData=function(){c.saving=!0;f.post("php/esposizioni.php?type=save",a.vm.esposizioni).success(function(){c.saving=!1}).error(function(a,c){console.log(c)})};a.saveDataDB=function(){c.saving=!0;f.post("php/esposizioni.php?type=db").success(function(){c.saving=!1;k.esposizioni().then(function(b){a.vm.esposizioni=b.data})}).error(function(a,c){console.log(c)})};
a.saveDataDB();var g="",h;a.$watch("input",function(b){h&&e.cancel(h);g=b;h=e(function(){a.filtro.esposizione.c=g},250)});a.eraseInput=function(b){27===b.key&&(a.input="")};a.updateCheck=function(){return!a.vm.nuovaEsposizione.c||!a.vm.nuovaEsposizione.f||!a.vm.nuovaEsposizione.m||!a.vm.nuovaEsposizione.l||!a.vm.nuovaEsposizione.t||!a.vm.nuovaEsposizione.r||isNaN(a.vm.nuovaEsposizione.y)};a.newItem=function(){c.saving=!1;a.errore.esposizione=!1;a.vm.nuovaEsposizione={i:a.vm.nuovaEsposizione.i+1,m:!1,
l:!1,t:!1,y:1}};a.action=function(b){"N"===b&&(d.findWhere(a.vm.esposizioni,{c:a.vm.nuovaEsposizione.c,f:a.vm.nuovaEsposizione.f,l:a.vm.nuovaEsposizione.l})?a.errore.esposizione=!0:(c.saving=!0,f.post("php/esposizioni.php?type=new",{id:a.vm.nuovaEsposizione.i,mark:a.vm.nuovaEsposizione.m,line:a.vm.nuovaEsposizione.l,tbpr:a.vm.nuovaEsposizione.t,cod:a.vm.nuovaEsposizione.c,fin:a.vm.nuovaEsposizione.f,dim:a.vm.nuovaEsposizione.d,pos:a.vm.nuovaEsposizione.y,nome:a.vm.nuovaEsposizione.n,image:a.vm.nuovaEsposizione.r}).success(function(b){delete a.vm.nuovaEsposizione.r;
a.vm.esposizioni.push(a.vm.nuovaEsposizione);a.vm.saveEsposizioneData();a.newItem()}).error(function(a,b){console.log(b)})))}}]);
angular.module("mpuDashboard").controller("compostiCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout",function(a,c,d,k,f,e){a.composto={selected:!1};a.selectItem=function(b){a.composto={};a.composto.selected=!0;a.composto.composto=b};a.vm.sorting=["l","c","f"];a.$watch("vm.nuovoComposto.m",function(){a.vm.nuovoComposto.l=!1});a.vm.saveCompostoData=function(){c.saving=!0;f.post("php/composti.php?type=save",a.vm.composti).success(function(){c.saving=!1}).error(function(a,c){console.log(c)})};
a.saveDataDB=function(){c.saving=!0;f.post("php/composti.php?type=db").success(function(){c.saving=!1;k.composti().then(function(b){a.vm.composti=b.data})}).error(function(a,c){console.log(c)})};a.saveDataDB();var g="",h;a.$watch("input",function(b){h&&e.cancel(h);g=b;h=e(function(){a.filtro.composto.c=g},250)});a.eraseInput=function(b){27===b.key&&(a.input="")};a.updateCheck=function(){return!a.vm.nuovoComposto.c||!a.vm.nuovoComposto.f||!a.vm.nuovoComposto.m||!a.vm.nuovoComposto.l||!a.vm.nuovoComposto.n||
!a.vm.nuovoComposto.r||isNaN(a.vm.nuovoComposto.y)};a.newItem=function(){c.saving=!1;a.errore.composto=!1;a.vm.nuovoComposto={i:a.vm.nuovoComposto.i+1,m:!1,l:!1,y:1}};a.action=function(b){"N"===b&&(d.findWhere(a.vm.composti,{c:a.vm.nuovoComposto.c,f:a.vm.nuovoComposto.f,l:a.vm.nuovoComposto.l})?a.errore.composto=!0:(c.saving=!0,f.post("php/composti.php?type=new",{id:a.vm.nuovoComposto.i,mark:a.vm.nuovoComposto.m,line:a.vm.nuovoComposto.l,cod:a.vm.nuovoComposto.c,fin:a.vm.nuovoComposto.f,pos:a.vm.nuovoComposto.y,
nome:a.vm.nuovoComposto.n,image:a.vm.nuovoComposto.r}).success(function(b){console.log("Risposta dalla pagina PHP",b);delete a.vm.nuovoComposto.r;a.vm.composti.push(a.vm.nuovoComposto);a.vm.saveCompostoData();a.newItem()}).error(function(a,b){console.log(b)})))}}]);
angular.module("mpuDashboard").controller("esposizioniProdottiCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout",function(a,c,d,k,f,e){a.esposizioneProdotto={selected:!1};a.vm.sorting=["j","e","c"];a.$watch("vm.nuovoEsposizioneProdotto.k",function(b){a.vm.nuovoEsposizioneProdotto.m=b;a.vm.nuovoEsposizioneProdotto.j=!1});a.$watch("vm.nuovoEsposizioneProdotto.j",function(b){a.vm.nuovoEsposizioneProdotto.l=b;a.vm.nuovoEsposizioneProdotto.c=!1});a.$watch("vm.nuovoEsposizioneProdotto.m",function(){a.vm.nuovoEsposizioneProdotto.l=
!1});a.$watch("vm.nuovoEsposizioneProdotto.l",function(){a.vm.nuovoEsposizioneProdotto.p=!1});a.$watch("vm.nuovoEsposizioneProdotto.p",function(b){if(b){b=d.findWhere(a.vm.prodotti,{i:b});b=d.pluck(b.z,"a");a.tabsAvailable=[];for(var c=0;c<b.length;c++){var e=d.findWhere(a.vm.finitureTabelle,{i:b[c]});a.tabsAvailable.push({i:b[c],n:e.n})}return a.tabsAvailable}a.vm.nuovoEsposizioneProdotto.u=!1});a.$watch("vm.nuovoEsposizioneProdotto.u",function(b){if(b)return a.finsAvailable=d.where(a.vm.abbinamenti,
{u:b}),a.finsAvailable;a.vm.nuovoEsposizioneProdotto.f=!1});a.selectItem=function(b){a.esposizioneProdotto={};a.esposizioneProdotto.selected=!0;a.esposizioneProdotto.esposizioneProdotto=b};a.vm.saveEsposizioniProdottiData=function(){c.saving=!0;f.post("php/esposizioniSettori.php?type=save",a.vm.esposizioniSettori).success(function(){c.saving=!1}).error(function(a,c){console.log(c)})};a.saveDataDB=function(){c.saving=!0;f.post("php/esposizioniSettori.php?type=db").success(function(){c.saving=!1;k.esposizioniSettori().then(function(b){a.vm.esposizioniSettori=
b.data})}).error(function(a,c){console.log(c)})};a.saveDataDB();var g="",h;a.$watch("input",function(b){h&&e.cancel(h);g=b;h=e(function(){if(g||""!==g){var b=[];d.each(a.vm.esposizioni,function(a){a.c===g&&b.push(a.i)});a.filtro.esposizioneProdotto.c=b}else a.filtro.esposizioneProdotto.c=!1},250)});a.$watch("inputCod",function(b){h&&e.cancel(h);g=b;h=e(function(){g&&(g=g.toUpperCase());if(""!==g){var b=d.findWhere(a.vm.prodotti,{c:g});b&&(a.filtro.esposizioneProdotto.p=b.i)}else a.filtro.esposizioneProdotto.p=
!1},250)});a.eraseInput=function(b,c){27===b.key&&(c?a.inputCod="":a.input="")};a.newItem=function(){c.saving=!1;a.errore.esposizioneProdotto=!1;a.vm.nuovoEsposizioneProdotto={i:a.vm.nuovoEsposizioneProdotto.i+1,c:!1,p:!1,m:!1,k:!1,l:!1,j:!1,u:!1,f:!1,y:1,q:1}};a.updateCheck=function(){return!a.vm.nuovoEsposizioneProdotto.c||!a.vm.nuovoEsposizioneProdotto.p||!a.vm.nuovoEsposizioneProdotto.l||!a.vm.nuovoEsposizioneProdotto.j||!a.vm.nuovoEsposizioneProdotto.u||!a.vm.nuovoEsposizioneProdotto.f||isNaN(a.vm.nuovoEsposizioneProdotto.y)||
isNaN(a.vm.nuovoEsposizioneProdotto.q)};a.action=function(b){"N"===b&&(c.saving=!0,f.post("php/esposizioniSettori.php?type=new",{id:a.vm.nuovoEsposizioneProdotto.i,comp:a.vm.nuovoEsposizioneProdotto.c,prd:a.vm.nuovoEsposizioneProdotto.p,pline:a.vm.nuovoEsposizioneProdotto.l,cline:a.vm.nuovoEsposizioneProdotto.j,pmark:a.vm.nuovoEsposizioneProdotto.m,cmark:a.vm.nuovoEsposizioneProdotto.k,fin:a.vm.nuovoEsposizioneProdotto.f,tab:a.vm.nuovoEsposizioneProdotto.u,pos:a.vm.nuovoEsposizioneProdotto.y,qnt:a.vm.nuovoEsposizioneProdotto.q}).success(function(b){console.log("Risposta dalla pagina PHP",
b);a.vm.esposizioniSettori.push(a.vm.nuovoEsposizioneProdotto);a.vm.saveEsposizioniProdottiData();a.newItem()}).error(function(a,b){console.log(b)}))}}]);
angular.module("mpuDashboard").controller("compostiProdottiCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout",function(a,c,d,k,f,e){a.compostoProdotto={selected:!1};a.vm.sorting=["j","e","c","y"];a.$watch("vm.nuovoCompostoProdotto.k",function(b){a.vm.nuovoCompostoProdotto.m=b;a.vm.nuovoCompostoProdotto.j=!1});a.$watch("vm.nuovoCompostoProdotto.j",function(b){a.vm.nuovoCompostoProdotto.l=b;a.vm.nuovoCompostoProdotto.c=!1});a.$watch("vm.nuovoCompostoProdotto.m",function(){a.vm.nuovoCompostoProdotto.l=
!1});a.$watch("vm.nuovoCompostoProdotto.l",function(){a.vm.nuovoCompostoProdotto.p=!1});a.$watch("vm.nuovoCompostoProdotto.p",function(b){if(b){b=d.findWhere(a.vm.prodotti,{i:b});b=d.pluck(b.z,"a");a.tabsAvailable=[];for(var c=0;c<b.length;c++){var e=d.findWhere(a.vm.finitureTabelle,{i:b[c]});a.tabsAvailable.push({i:b[c],n:e.n})}return a.tabsAvailable}a.vm.nuovoCompostoProdotto.u=!1});a.$watch("vm.nuovoCompostoProdotto.u",function(b){if(b)return a.finsAvailable=d.where(a.vm.abbinamenti,{u:b}),a.finsAvailable;
a.vm.nuovoCompostoProdotto.f=!1});a.selectItem=function(b){a.compostoProdotto={};a.compostoProdotto.selected=!0;a.compostoProdotto.compostoProdotto=b};a.vm.saveCompostoProdottiData=function(){c.saving=!0;f.post("php/compostiProdotti.php?type=save",a.vm.compostiProdotti).success(function(){c.saving=!1}).error(function(a,c){console.log(c)})};a.saveDataDB=function(){c.saving=!0;f.post("php/compostiProdotti.php?type=db").success(function(){c.saving=!1;k.compostiProdotti().then(function(b){a.vm.compostiProdotti=
b.data})}).error(function(a,c){console.log(c)})};a.saveDataDB();var g="",h;a.$watch("input",function(b){h&&e.cancel(h);g=b;h=e(function(){if(g||""!==g){var b=[];d.each(a.vm.composti,function(a){a.c===g&&b.push(a.i)});a.filtro.compostoProdotto.c=b}else a.filtro.compostoProdotto.c=!1},250)});a.$watch("inputCod",function(b){h&&e.cancel(h);g=b;h=e(function(){g&&(g=g.toUpperCase());if(""!==g){var b=d.findWhere(a.vm.prodotti,{c:g});b&&(a.filtro.compostoProdotto.p=b.i)}else a.filtro.compostoProdotto.p=!1},
250)});a.eraseInput=function(b,c){27===b.key&&(c?a.inputCod="":a.input="")};a.newItem=function(){c.saving=!1;a.errore.compostoProdotto=!1;a.vm.nuovoCompostoProdotto={i:a.vm.nuovoCompostoProdotto.i+1,c:!1,p:!1,m:!1,k:!1,l:!1,j:!1,u:!1,f:!1,y:1,q:1}};a.updateCheck=function(){return!a.vm.nuovoCompostoProdotto.c||!a.vm.nuovoCompostoProdotto.p||!a.vm.nuovoCompostoProdotto.l||!a.vm.nuovoCompostoProdotto.j||!a.vm.nuovoCompostoProdotto.u||!a.vm.nuovoCompostoProdotto.f||isNaN(a.vm.nuovoCompostoProdotto.y)||
isNaN(a.vm.nuovoCompostoProdotto.q)};a.action=function(b){"N"===b&&(c.saving=!0,f.post("php/compostiProdotti.php?type=new",{id:a.vm.nuovoCompostoProdotto.i,comp:a.vm.nuovoCompostoProdotto.c,prd:a.vm.nuovoCompostoProdotto.p,pline:a.vm.nuovoCompostoProdotto.l,cline:a.vm.nuovoCompostoProdotto.j,pmark:a.vm.nuovoCompostoProdotto.m,cmark:a.vm.nuovoCompostoProdotto.k,fin:a.vm.nuovoCompostoProdotto.f,tab:a.vm.nuovoCompostoProdotto.u,pos:a.vm.nuovoCompostoProdotto.y,qnt:a.vm.nuovoCompostoProdotto.q}).success(function(b){console.log("Risposta dalla pagina PHP",
b);a.vm.compostiProdotti.push(a.vm.nuovoCompostoProdotto);a.vm.saveCompostoProdottiData();a.newItem()}).error(function(a,b){console.log(b)}))}}]);
angular.module("mpuDashboard").controller("esposizioniSettoriCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout",function(a,c,d,k,f,e){a.esposizioneSettore={selected:!1};a.vm.sorting="-i";a.$watch("vm.nuovoEsposizioneSettore.m",function(){a.vm.nuovoEsposizioneSettore.l=!1;a.vm.nuovoEsposizioneSettore.w=!1;a.vm.nuovoEsposizioneSettore.c=!1});a.$watch("vm.nuovoEsposizioneSettore.l",function(b){a.vm.nuovoEsposizioneSettore.c=!1});a.$watch("vm.nuovoEsposizioneSettore.w",function(b){a.settoriAvailable=
d.where(a.vm.lineeSettori,{l:b});d.each(a.settoriAvailable,function(b){b.n=d.findWhere(a.vm.settori,{i:b.h}).n});a.esposizioniAvailable=[{c:" Tutti",i:-1}];var c=d.where(a.vm.esposizioni,{l:a.vm.nuovoEsposizioneSettore.l});d.each(c,function(c){d.find(a.vm.esposizioniSettori,function(a){return a.c===c.i&&b===c.l})||a.esposizioniAvailable.push(c)})});a.$watch("vm.nuovoEsposizioneSettore.c",function(b){if(b&&-1!==b){var c=d.find(a.vm.prodotti,function(a){return a.i===b});a.vm.nuovoEsposizioneSettore.n=
c.c}});a.toggleSet=function(b){-1===a.vm.nuovoEsposizioneSettore.h.indexOf(b)?a.vm.nuovoEsposizioneSettore.h.push(parseInt(b)):a.vm.nuovoEsposizioneSettore.h.splice(a.vm.nuovoEsposizioneSettore.h.indexOf(b),1)};a.selectItem=function(b){a.esposizioneSettore={};a.esposizioneSettore.selected=!0;a.esposizioneSettore.esposizioneSettore=b};a.vm.saveEsposizioneSettoreData=function(){c.saving=!0;f.post("php/esposizioniSettori.php?type=save",a.vm.esposizioniSettori).success(function(){c.saving=!1}).error(function(a,
c){console.log(c)})};a.saveDataDB=function(){c.saving=!0;f.post("php/esposizioniSettori.php?type=db").success(function(){c.saving=!1;k.esposizioniSettori().then(function(b){a.vm.esposizioniSettori=b.data})}).error(function(a,c){console.log(c)})};a.saveDataDB();var g="",h;a.$watch("input",function(b){h&&e.cancel(h);g=b;h=e(function(){if(g||""!==g){var b=[];d.each(a.vm.esposizioni,function(a){a.c===g&&b.push(a.i)});a.filtro.esposizioneSettore.c=b}else a.filtro.esposizioneSettore.c=!1},250)});a.eraseInput=
function(b){27===b.key&&(a.input="")};a.newItem=function(){c.saving=!1;a.errore.esposizioneSettore=!1;a.vm.nuovoEsposizioneSettore={i:a.vm.nuovoEsposizioneSettore.i+1,m:!1,l:!1,c:!1,v:0,h:[]}};a.updateCheck=function(){return!a.vm.nuovoEsposizioneSettore.m||!a.vm.nuovoEsposizioneSettore.l||!a.vm.nuovoEsposizioneSettore.w||!a.vm.nuovoEsposizioneSettore.c};a.action=function(b){"N"===b&&(0!==a.vm.nuovoEsposizioneSettore.h.length?(c.saving=!0,f.post("php/esposizioniSettori.php?type=new",{id:a.vm.nuovoEsposizioneSettore.i,
mark:a.vm.nuovoEsposizioneSettore.m,line:a.vm.nuovoEsposizioneSettore.l,nwln:a.vm.nuovoEsposizioneSettore.w,array:a.vm.nuovoEsposizioneSettore.h,cod:a.vm.nuovoEsposizioneSettore.c,view:a.vm.nuovoEsposizioneSettore.v}).success(function(b){console.log("Risposta dalla pagina PHP",b);-1!==a.vm.nuovoEsposizioneSettore.c?(a.vm.esposizioniSettori.push(a.vm.nuovoEsposizioneSettore),a.vm.saveEsposizioneSettoreData()):a.saveDataDB();a.newItem()}).error(function(a,b){console.log(b)})):a.errore.esposizioneSettore=
!0)}}]);
angular.module("mpuDashboard").controller("compostiSettoriCtrl",["$scope","$rootScope","_","dataSvc","$http","$timeout",function(a,c,d,k,f,e){a.compostoSettore={selected:!1};a.vm.sorting="-i";a.$watch("vm.nuovoCompostoSettore.m",function(){a.vm.nuovoCompostoSettore.l=!1;a.vm.nuovoCompostoSettore.w=!1;a.vm.nuovoCompostoSettore.c=!1});a.$watch("vm.nuovoCompostoSettore.l",function(b){a.vm.nuovoCompostoSettore.c=!1});a.$watch("vm.nuovoCompostoSettore.w",function(b){a.settoriAvailable=d.where(a.vm.lineeSettori,{l:b});
d.each(a.settoriAvailable,function(b){b.n=d.findWhere(a.vm.settori,{i:b.h}).n});a.compostoAvailable=[{c:" Tutti",i:-1}];var c=d.where(a.vm.composti,{l:a.vm.nuovoCompostoSettore.l});d.each(c,function(c){d.find(a.vm.compostiSettori,function(a){return a.c===c.i&&b===c.l})||a.compostoAvailable.push(c)})});a.$watch("vm.nuovoCompostoSettore.c",function(b){if(b&&-1!==b){var c=d.find(a.vm.prodotti,function(a){return a.i===b});a.vm.nuovoCompostoSettore.n=c.c}});a.toggleSet=function(b){-1===a.vm.nuovoCompostoSettore.h.indexOf(b)?
a.vm.nuovoCompostoSettore.h.push(parseInt(b)):a.vm.nuovoCompostoSettore.h.splice(a.vm.nuovoCompostoSettore.h.indexOf(b),1)};a.selectItem=function(b){a.compostoSettore={};a.compostoSettore.selected=!0;a.compostoSettore.compostoSettore=b};a.vm.saveCompostoSettoreData=function(){c.saving=!0;f.post("php/compostiSettori.php?type=save",a.vm.compostiSettori).success(function(){c.saving=!1}).error(function(a,c){console.log(c)})};a.saveDataDB=function(){c.saving=!0;f.post("php/compostiSettori.php?type=db").success(function(){c.saving=
!1;k.compostiSettori().then(function(b){a.vm.compostiSettori=b.data})}).error(function(a,c){console.log(c)})};a.saveDataDB();var g="",h;a.$watch("input",function(b){h&&e.cancel(h);g=b;h=e(function(){if(g||""!==g){var b=[];d.each(a.vm.composti,function(a){a.c===g&&b.push(a.i)});a.filtro.compostoSettore.c=b}else a.filtro.compostoSettore.c=!1},250)});a.eraseInput=function(b){27===b.key&&(a.input="")};a.newItem=function(){c.saving=!1;a.errore.compostoSettore=!1;a.vm.nuovoCompostoSettore={i:a.vm.nuovoCompostoSettore.i+
1,m:!1,l:!1,c:!1,v:0,h:[]}};a.updateCheck=function(){return!a.vm.nuovoCompostoSettore.m||!a.vm.nuovoCompostoSettore.l||!a.vm.nuovoCompostoSettore.w||!a.vm.nuovoCompostoSettore.c};a.action=function(b){"N"===b&&(0!==a.vm.nuovoCompostoSettore.h.length?(c.saving=!0,f.post("php/compostiSettori.php?type=new",{id:a.vm.nuovoCompostoSettore.i,mark:a.vm.nuovoCompostoSettore.m,line:a.vm.nuovoCompostoSettore.l,nwln:a.vm.nuovoCompostoSettore.w,array:a.vm.nuovoCompostoSettore.h,cod:a.vm.nuovoCompostoSettore.c,
view:a.vm.nuovoCompostoSettore.v}).success(function(b){console.log("Risposta dalla pagina PHP",b);-1!==a.vm.nuovoCompostoSettore.c?(a.vm.compostiSettori.push(a.vm.nuovoCompostoSettore),a.vm.saveCompostoSettoreData()):a.saveDataDB();a.newItem()}).error(function(a,b){console.log(b)})):a.errore.compostoSettore=!0)}}]);
